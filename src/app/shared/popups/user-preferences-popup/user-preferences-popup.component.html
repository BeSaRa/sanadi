<div class="dialog-toolbar bg-primary d-flex justify-content-between">
  <h1 class="h6 text-white">{{ lang.map.user_preferences }}</h1>
  <div>
    <button type="button" class="btn btn-fullscreen btn-close-white icon-btn"
            tabindex="-1" aria-label="Fullscreen" fullscreenBtn></button>
    <button type="button" class="btn-close btn-close-white"
            tabindex="-1" [dialogClose]="model" aria-label="Close"></button>
  </div>
</div>
<div class="dialog-content w800px" #content>
  <form [formGroup]="form" novalidate>
    <div class="row mb-3">
      <div class="col-sm-6 position-relative">
        <label asteriskIfRequired="arName" for="arName"
               class="form-label">{{lang.map.lbl_arabic_name}}</label>
        <input id="arName"
               validationClasses="arName"
               formControlName="arName" class="form-control">
      </div>
      <div class="col-sm-6 position-relative">
        <label asteriskIfRequired="enName" for="enName"
               class="form-label">{{lang.map.lbl_english_name}}</label>
        <input id="enName"
               validationClasses="enName"
               formControlName="enName" class="form-control">
      </div>
    </div>
    <div class="row mb-3">
      <div class="col-sm-6 position-relative">
        <label asteriskIfRequired="empNum" for="empNum"
               class="form-label">{{lang.map.lbl_employee_number}}</label>
        <input id="empNum"
               validationClasses="empNum"
               formControlName="empNum" class="form-control"
               [mask]="inputMaskPatterns.NUMBER_ONLY">
      </div>
      <div class="col-sm-6 position-relative">
        <label asteriskIfRequired="qid" for="qid"
               class="form-label">{{lang.map.qatari_id_number}}</label>
        <input id="qid"
               validationClasses="qid"
               formControlName="qid" class="form-control"
               [mask]="inputMaskPatterns.NUMBER_ONLY">
      </div>
    </div>
    <div class="row mb-3">
      <div class="col-sm-6 position-relative">
        <label asteriskIfRequired="phoneNumber" for="phoneNumber"
               class="form-label">{{lang.map.lbl_phone}}</label>
        <input id="phoneNumber"
               validationClasses="phoneNumber"
               formControlName="phoneNumber" class="form-control"
               [mask]="inputMaskPatterns.NUMBER_ONLY">
      </div>
      <div class="col-sm-6 position-relative">
        <label asteriskIfRequired="email" for="email"
               class="form-label">{{lang.map.lbl_email}}</label>
        <input id="email"
               validationClasses="email"
               formControlName="email" class="form-control">
      </div>
    </div>
    <div class="row mb-3">
      <div class="col-sm-6 ng-select-wrapper">
        <label asteriskIfRequired="defaultLang" for="defaultLang"
               class="form-label">{{lang.map.default_language}}</label>
        <ng-select validationClasses="defaultLang" labelForId="defaultLang"
                   placeholder="{{lang.map.select}}"
                   [notFoundText]="lang.map.msg_not_found"
                   formControlName="defaultLang"
                   id="defaultLang" appendTo="body"
                   [multiple]="false">
          <ng-option [value]="language.lookupKey"
                     *ngFor="let language of languages">{{language.getName()}}</ng-option>
        </ng-select>
        <app-field-error-message controlName="defaultLang"></app-field-error-message>
      </div>
      <div class="col-sm-6 mt-4 form-check form-switch">
        <div class="ms-3">
          <input class="form-check-input" type="checkbox" id="isMailNotificationEnabled"
                 formControlName="isMailNotificationEnabled">
          <label class="form-check-label"
                 for="isMailNotificationEnabled">{{lang.map.mail_notifications}}</label>
        </div>
      </div>
    </div>
    <div class="row mb-3">
      <div class="col-sm-6 position-relative">
        <label class="form-label">{{lang.map.alternate_emails}}</label>
        <button (click)="addAlternateUserEmail()" class="btn btn-link outline-none" title="{{lang.map.add_email}}">
          <i class="mdi mdi-plus-box"></i>
        </button>
        <div class="row" [formGroup]="alternateUserEmailsForm">
          <div formArrayName="emails" class="emails-container">
            <div class="col-sm-12 position-relative email-wrapper" *ngFor="let email of emails.controls; let i = index">
              <div class="input-group">
                <input [id]="i" class="form-control" [formControlName]="i" validationClasses="{{i}}">
                <app-field-error-message controlName="{{i}}"></app-field-error-message>
                <button (click)="deleteEmail(i)" class="input-group-text" title="{{lang.map.remove_email}}">
                  <i class="mdi mdi-delete"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<div class="dialog-actions">
  <button tabindex="-1" (click)="displayFormValidity(null, content)" tooltip="{{ lang.map.validate_fields }}"
          class="btn btn-link"><i class="mdi mdi-information-outline text-info"></i></button>
  <div class="flex-grow-1"></div>
  <button (click)="save()" [disabled]="!form || form.invalid || invalidEmailsForm()"
          class="btn btn-primary">{{ lang.map.btn_save }}</button>
  <button [dialogClose]="model" class="btn btn-secondary">{{ lang.map.btn_close }}</button>
</div>
