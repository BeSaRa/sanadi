<div class="row">
  <div class="col-12 d-flex align-items-center">
    <h1 *ngIf="!!currentRequest?.id"
        class="h6 text-primary m-0 d-inline-block">{{langService.map.request_number + ' : '}}
      <span class="user-select-all">{{currentRequest?.requestFullSerial}}</span></h1>
    <h1 *ngIf="!currentRequest?.id"
        class="h6 text-primary m-0 d-inline-block">{{langService.map.menu_provide_request}}</h1>
    <button [tooltip]="langService.map.print_request_form" *ngIf="currentRequest?.id"
            (click)="currentRequest?.printRequest('request.pdf' , $event)"
            class="icon-btn text-primary"><i class="mdi mdi-printer"></i></button>
  </div>
</div>
<form autocomplete="off" [formGroup]="form" id="form">

  <tabs-list class="py-4" (onTabChange)="setButtonsVisibility($event)">
    <tab [name]="tabsData.personal.name" [hasError]="fm.getFieldInvalidStatus('personalTab')"
         [template]="personalInfo" [title]="langService.map.personal_info">{{langService.map.personal_info}}</tab>
    <tab [name]="tabsData.income.name" [hasError]="fm.getFieldInvalidStatus('incomeTab')"
         [template]="income" [title]="langService.map.income_employment">{{langService.map.income_employment}}</tab>
    <tab [name]="tabsData.address.name" [hasError]="fm.getFieldInvalidStatus('addressTab')"
         [template]="address" [title]="langService.map.lbl_address">{{langService.map.lbl_address}}</tab>
    <tab [name]="tabsData.requestInfo.name" [hasError]="fm.getFieldInvalidStatus('requestInfoTab')"
         [template]="requestInfo" [title]="langService.map.request_info">{{langService.map.request_info}}</tab>
    <tab [name]="tabsData.requestStatus.name" *ngIf="!!currentRequest?.id || currentRequest?.isNewPartialRequest()"
         [hasError]="fm.getFieldInvalidStatus('requestStatusTab')"
         [template]="requestStatus" [title]="langService.map.request_status">{{langService.map.request_status}}</tab>
    <tab [name]="tabsData.aids.name" [disabled]="isProvidedAidDisabled()"
         *ngIf="!!currentRequest?.id || currentRequest?.isNewPartialRequest()"
         [hasError]="fm.getFieldInvalidStatus('aidTab')"
         [template]="providedAid" [title]="langService.map.provided_aid">{{langService.map.provided_aid}}</tab>
    <tab [name]="tabsData.attachments.name" *ngIf="!!currentRequest?.id || currentRequest?.isNewPartialRequest()"
         [hasError]="fm.getFieldInvalidStatus('attachmentsTab')"
         [template]="attachmentsTabTemplate"
         [title]="langService.map.attachments">{{langService.map.attachments}}</tab>
  </tabs-list>
  <!--  personal info Tab -->
  <ng-template #personalInfo>
    <div formGroupName="personalTab">
      <!--Primary Id-->
      <div class="row d-flex flex-row">
        <div class="col-sm-12">
          <h6 class="text-primary">{{langService.map.beneficiary_primary_id}}</h6>
          <div class="row d-flex flex-column flex-md-row">
            <div class="col-md-4 col-sm-12 mb-4">
              <label for="benPrimaryIdType" class="form-label"
                     asteriskIfRequired="benPrimaryIdType">{{langService.map.id_type}}</label>
              <ng-select [selectOnTab]="true" labelForId="benPrimaryIdType" [clearable]="false"
                         [readonly]="beneficiaryPrimaryIdDisabled()"
                         placeholder="{{langService.map.select}}" id="benPrimaryIdType"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="benPrimaryIdType">
                <ng-option *ngFor="let option of idTypes" [value]="option.lookupKey"
                           [disabled]="isPrimaryIdTypeDisabled(option.lookupKey)">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benPrimaryIdType')"></app-field-error-message>
            </div>
            <div class="col-md-4 col-sm-12 mb-4">
              <label for="benPrimaryIdNumber" class="form-label"
                     asteriskIfRequired="benPrimaryIdNumber">{{langService.map.id_number}}</label>
              <div class="input-group has-validation">
                <input formControlName="benPrimaryIdNumber" id="benPrimaryIdNumber" class="form-control"
                       type="text" [ngClass]="fm.getInvalidClass('personalTab.benPrimaryIdNumber')"
                       (keyup)="disableEnter($event)" maxlength="20" trimInput
                       [readOnly]="beneficiaryPrimaryIdDisabled()">
                <button tabindex="-1" type="button"
                        [disabled]="readOnly || editMode || primaryIdNumberField?.invalid || primaryNationalityField?.invalid"
                        (click)="getBeneficiaryData($event)" class="input-group-text">
                  <i class="mdi mdi-account-search text-primary"></i>
                </button>
                <app-field-error-message
                  [control]="fm.getFormField('personalTab.benPrimaryIdNumber')"></app-field-error-message>
              </div>
            </div>
            <div class="col-md-4 col-sm-12 mb-4" *ngIf="displayPrimaryNationality">
              <ng-container *ngIf="primaryNationalityListType === 'normal'">
                <label for="benPrimaryIdNationality" class="form-label"
                       asteriskIfRequired="benPrimaryIdNationality">{{langService.map.lbl_nationality}}</label>
                <ng-select [selectOnTab]="true" labelForId="benPrimaryIdNationality" [clearable]="false"
                           [readonly]="beneficiaryPrimaryIdDisabled(true)"
                           placeholder="{{langService.map.select}}" id="benPrimaryIdNationality"
                           [notFoundText]="langService.map.msg_not_found" formControlName="benPrimaryIdNationality"
                           [ngClass]="fm.getStatusClass('personalTab.benPrimaryIdNationality')">
                  <ng-option *ngFor="let option of lookup.listByCategory.Nationality" [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
              </ng-container>
              <ng-container *ngIf="primaryNationalityListType === 'gulf'">
                <label for="benPrimaryIdNationalityGulf" class="form-label"
                       asteriskIfRequired="benPrimaryIdNationality">{{langService.map.country}}</label>
                <ng-select [selectOnTab]="true" labelForId="benPrimaryIdNationalityGulf" [clearable]="false"
                           [readonly]="beneficiaryPrimaryIdDisabled(true)"
                           placeholder="{{langService.map.select}}" id="benPrimaryIdNationalityGulf"
                           [notFoundText]="langService.map.msg_not_found" formControlName="benPrimaryIdNationality"
                           [ngClass]="fm.getStatusClass('personalTab.benPrimaryIdNationality')">
                  <ng-option *ngFor="let option of lookup.listByCategory.GulfCountries" [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
              </ng-container>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benPrimaryIdNationality')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <!--Secondary Id-->
      <div class="row d-flex flex-row">
        <div class="col-sm-12">
          <h6 class="text-primary">{{langService.map.beneficiary_secondary_id}}</h6>
          <div class="row d-flex flex-column flex-md-row">
            <div class="col-md-4 col-sm-12 mb-4">
              <label for="benSecIdType" class="form-label"
                     asteriskIfRequired="benSecIdType">{{langService.map.id_type}}</label>
              <ng-select [selectOnTab]="true" labelForId="benSecIdType" [clearable]="false"
                         [readonly]="beneficiarySecondaryIdDisabled()"
                         placeholder="{{langService.map.select}}" id="benSecIdType"
                         [notFoundText]="langService.map.msg_not_found" formControlName="benSecIdType">
                <ng-option value="">{{langService.map.lbl_none}}</ng-option>
                <ng-option *ngFor="let option of idTypes" [value]="option.lookupKey"
                           [disabled]="isSecondaryIdTypeDisabled(option.lookupKey)">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
            </div>
            <div class="col-md-4 col-sm-12 mb-4">
              <label for="benSecIdNumber" class="form-label"
                     asteriskIfRequired="benSecIdNumber">{{langService.map.id_number}}</label>
              <input formControlName="benSecIdNumber" id="benSecIdNumber" class="form-control" type="text"
                     [readOnly]="beneficiarySecondaryIdDisabled()" maxlength="20" trimInput
                     [ngClass]="fm.getInvalidClass('personalTab.benSecIdNumber')" (keyup)="disableEnter($event)">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benSecIdNumber')"></app-field-error-message>
            </div>
            <div class="col-md-4 col-sm-12 mb-4" *ngIf="displaySecondaryNationality">
              <ng-container *ngIf="secondaryNationalityListType === 'normal'">
                <label for="benSecIdNationality" class="form-label"
                       asteriskIfRequired="benSecIdNationality">{{langService.map.lbl_nationality}}</label>
                <ng-select [selectOnTab]="true" labelForId="benSecIdNationality" [clearable]="false"
                           [readonly]="beneficiarySecondaryIdDisabled(true)"
                           placeholder="{{langService.map.select}}" id="benSecIdNationality"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="benSecIdNationality"
                           [ngClass]="fm.getStatusClass('personalTab.benSecIdNationality')">
                  <ng-option value="">{{langService.map.lbl_none}}</ng-option>
                  <ng-option *ngFor="let option of lookup.listByCategory.Nationality" [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
              </ng-container>
              <ng-container *ngIf="secondaryNationalityListType === 'gulf'">
                <label for="benSecIdNationalityGulf" class="form-label"
                       asteriskIfRequired="benSecIdNationality">{{langService.map.country}}</label>
                <ng-select [selectOnTab]="true" labelForId="benSecIdNationalityGulf" [clearable]="false"
                           [readonly]="beneficiarySecondaryIdDisabled(true)"
                           placeholder="{{langService.map.select}}" id="benSecIdNationalityGulf"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="benSecIdNationality"
                           [ngClass]="fm.getStatusClass('personalTab.benSecIdNationality')">
                  <ng-option value="">{{langService.map.lbl_none}}</ng-option>
                  <ng-option *ngFor="let option of lookup.listByCategory.GulfCountries" [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
              </ng-container>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benSecIdNationality')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <hr class="mt-0"/>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label asteriskIfRequired="arName" for="arName"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.arabic_name}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input id="arName" [ngClass]="fm.getStatusClass('personalTab.arName')" formControlName="arName"
                     trimInput class="form-control" type="text" [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.arName')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label asteriskIfRequired="enName" for="enName"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.english_name}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input id="enName" [ngClass]="fm.getStatusClass('personalTab.enName')" formControlName="enName"
                     trimInput class="form-control" type="text" [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.enName')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly || isPartialRequest">
            <label for="dateOfBirthReadOnly" asteriskIfRequired="dateOfBirth"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.date_of_birth}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <div class="input-group">
                <i class="input-group-text mdi mdi-calendar"></i>
                <div class="form-control input-disabled" formControlName="dateOfBirth"
                     id="dateOfBirthReadOnly" [options]="datepickerOptionsMap.dateOfBirth"
                     angular-mydatepicker [ngClass]="fm.getStatusClass('personalTab.dateOfBirth')">
                </div>
                <app-field-error-message
                  [control]="fm.getFormField('personalTab.dateOfBirth')"></app-field-error-message>
              </div>
            </div>
          </div>
          <div class="row d-flex flex-column flex-md-row" *ngIf="!(readOnly || isPartialRequest)">
            <label for="dateOfBirth" asteriskIfRequired="dateOfBirth"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.date_of_birth}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <div class="input-group">
                <i class="input-group-text mdi mdi-calendar"></i>
                <div class="form-control" formControlName="dateOfBirth"
                     id="dateOfBirth" [options]="datepickerOptionsMap.dateOfBirth"
                     (click)="dpDateOfBirth.toggleCalendar()" #dpDateOfBirth="angular-mydatepicker"
                     angular-mydatepicker [ngClass]="fm.getStatusClass('personalTab.dateOfBirth')"></div>
                <app-field-error-message
                  [control]="fm.getFormField('personalTab.dateOfBirth')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="gender" asteriskIfRequired="gender"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.gender}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="gender" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="gender"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="gender"
                         [ngClass]="fm.getStatusClass('personalTab.gender')">
                <ng-option *ngFor="let option of lookup.listByCategory.Gender" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.gender')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="mobile" asteriskIfRequired="phoneNumber1"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.mobile_number}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input [ngClass]="fm.getStatusClass('personalTab.phoneNumber1')" id="mobile"
                     formControlName="phoneNumber1" class="form-control" type="text"
                     [mask]="inputMaskPatterns.NUMBER_ONLY" [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.phoneNumber1')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="nationality" asteriskIfRequired="benNationality"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.lbl_nationality}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="nationality" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="nationality"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="benNationality"
                         [ngClass]="fm.getStatusClass('personalTab.benNationality')">
                <ng-option *ngFor="let option of lookup.listByCategory.Nationality" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benNationality')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="sponsorsCount" asteriskIfRequired="benDependentsCount"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.sponsors_count}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input maxlength="2" id="sponsorsCount"
                     [ngClass]="fm.getStatusClass('personalTab.benDependentsCount')"
                     formControlName="benDependentsCount" class="form-control"
                     [mask]="inputMaskPatterns.NUMBER_ONLY" [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benDependentsCount')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="mobile" asteriskIfRequired="familyCount"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.family_member_count}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input maxlength="2" id="familyCount"
                     [ngClass]="fm.getStatusClass('personalTab.familyCount')"
                     formControlName="familyCount" class="form-control"
                     [mask]="inputMaskPatterns.NUMBER_ONLY" [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.familyCount')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="maritalStatus" asteriskIfRequired="maritalStatus"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.marital_status}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="maritalStatus" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="maritalStatus"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="maritalStatus"
                         [ngClass]="fm.getStatusClass('personalTab.maritalStatus')">
                <ng-option *ngFor="let option of lookup.listByCategory.BenMaritialStatus" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.maritalStatus')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="occupationStatus" asteriskIfRequired="benCategory"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.beneficiary_category}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="occupationStatus" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="occupationStatus"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="benCategory"
                         [ngClass]="fm.getStatusClass('personalTab.benCategory')">
                <ng-option *ngFor="let option of lookup.listByCategory.BenCategory" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benCategory')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="educationLevel" asteriskIfRequired="educationLevel"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.educational_level}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="educationLevel" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="educationLevel"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="educationLevel"
                         [ngClass]="fm.getStatusClass('personalTab.educationLevel')">
                <ng-option *ngFor="let option of lookup.listByCategory.BenEducationLevel" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.educationLevel')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="employer" asteriskIfRequired="employeer"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.employer}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input maxlength="100" id="employer" [ngClass]="fm.getStatusClass('personalTab.employeer')"
                     formControlName="employeer" class="form-control" type="text"
                     [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.employeer')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12">
          <div class="row d-flex flex-column flex-md-row">
            <label for="benNotes" class="col-sm-12 col-md-2 col-form-label">{{langService.map.notes}}</label>
            <div class="col-md-10 col-sm-12">
                    <textarea id="benNotes" formControlName="benNotes" rows="5" class="form-control"
                              [ngClass]="fm.getStatusClass('personalTab.benNotes')"
                              [readOnly]="readOnly || isPartialRequest"></textarea>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benNotes')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <!-- income Tab  -->
  <ng-template formGroupName="incomeTab" #income>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="employmentStatus" asteriskIfRequired="occuptionStatus"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.employment_status}}</label>
          <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
            <ng-select [selectOnTab]="true" labelForId="employmentStatus" [clearable]="false"
                       [readonly]="readOnly || isPartialRequest"
                       placeholder="{{langService.map.select}}" id="employmentStatus"
                       [notFoundText]="langService.map.msg_not_found"
                       formControlName="occuptionStatus"
                       [ngClass]="fm.getStatusClass('incomeTab.occuptionStatus')">
              <ng-option *ngFor="let option of lookup.listByCategory.BenOccuptionStatus" [value]="option.lookupKey">
                {{option.getName()}}
              </ng-option>
            </ng-select>
            <app-field-error-message
              [control]="fm.getFormField('incomeTab.occuptionStatus')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label asteriskIfRequired="occuption" for="occupation"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.occupation}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input id="occupation" maxlength="100" [ngClass]="fm.getStatusClass('incomeTab.occuption')"
                   formControlName="occuption" class="form-control" type="text"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('incomeTab.occuption')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="workplace" asteriskIfRequired="employeerAddress"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.workplace}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="512" [ngClass]="fm.getStatusClass('incomeTab.employeerAddress')"
                   formControlName="employeerAddress" id="workplace" class="form-control" type="text"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('incomeTab.employeerAddress')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="monthlyIncome" asteriskIfRequired="benIncome"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.monthly_income}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input id="monthlyIncome" maxlength="20" formControlName="benIncome"
                   [ngClass]="fm.getStatusClass('incomeTab.benIncome')"
                   class="form-control" [mask]="inputMaskPatterns.SEPARATOR"
                   [thousandSeparator]="inputMaskPatterns.THOUSAND_SEPARATOR"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('incomeTab.benIncome')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="extraIncome"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.extra_income}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="20" [ngClass]="fm.getStatusClass('incomeTab.benExtraIncome')"
                   formControlName="benExtraIncome" class="form-control" id="extraIncome"
                   [mask]="inputMaskPatterns.SEPARATOR" [thousandSeparator]="inputMaskPatterns.THOUSAND_SEPARATOR"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('incomeTab.benExtraIncome')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="extraIncomeSource"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.extra_income_source}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="100" [ngClass]="fm.getStatusClass('incomeTab.benExtraIncomeSource')"
                   formControlName="benExtraIncomeSource" id="extraIncomeSource" class="form-control" type="text"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('incomeTab.benExtraIncomeSource')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="totalDebts" class="col-sm-12 col-md-4 col-form-label">{{langService.map.total_debts}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="20" [ngClass]="fm.getStatusClass('incomeTab.totalDebts')" id="totalDebts"
                   formControlName="totalDebts" class="form-control" type="text"
                   [mask]="inputMaskPatterns.SEPARATOR" [thousandSeparator]="inputMaskPatterns.THOUSAND_SEPARATOR"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('incomeTab.totalDebts')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="totalInstalments"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.number_of_installments}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="20" [ngClass]="fm.getStatusClass('incomeTab.totalInstalments')" id="totalInstalments"
                   formControlName="totalInstalments" class="form-control" type="text"
                   [mask]="inputMaskPatterns.NUMBER_ONLY" [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('incomeTab.totalInstalments')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="monthlyRent"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.monthly_rent}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="20" [ngClass]="fm.getStatusClass('incomeTab.benHouseRent')" id="monthlyRent"
                   formControlName="benHouseRent" class="form-control"
                   [mask]="inputMaskPatterns.SEPARATOR" [thousandSeparator]="inputMaskPatterns.THOUSAND_SEPARATOR"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('incomeTab.benHouseRent')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <!-- address Tab  -->
  <ng-template formGroupName="addressTab" #address>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="city" asteriskIfRequired="residenceCountry"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.city}}</label>
          <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
            <ng-select [selectOnTab]="true" labelForId="city" [clearable]="false"
                       [readonly]="readOnly || isPartialRequest"
                       placeholder="{{langService.map.select}}" id="city"
                       [notFoundText]="langService.map.msg_not_found"
                       formControlName="residenceCountry"
                       [ngClass]="fm.getStatusClass('addressTab.residenceCountry')">
              <ng-option *ngFor="let option of lookup.listByCategory.Countries" [value]="option.lookupKey">
                {{option.getName()}}
              </ng-option>
            </ng-select>
            <app-field-error-message
              [control]="fm.getFormField('addressTab.residenceCountry')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="zone" asteriskIfRequired="zone"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.lbl_zone}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="20" [ngClass]="fm.getStatusClass('addressTab.zone')" id="zone" formControlName="zone"
                   class="form-control" [mask]="inputMaskPatterns.NUMBER_ONLY"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('addressTab.zone')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="street" asteriskIfRequired="streetName"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.lbl_street}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="20" [ngClass]="fm.getStatusClass('addressTab.streetName')" id="street"
                   formControlName="streetName" class="form-control" type="text"
                   [mask]="inputMaskPatterns.NUMBER_ONLY" [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('addressTab.streetName')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="buildingName" asteriskIfRequired="buildingName"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.building_number}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="20" [ngClass]="fm.getStatusClass('addressTab.buildingName')" id="buildingName"
                   formControlName="buildingName" class="form-control" type="text"
                   [mask]="inputMaskPatterns.NUMBER_ONLY" [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('addressTab.buildingName')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="unit" class="col-sm-12 col-md-4 col-form-label">{{langService.map.unit}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="20" [ngClass]="fm.getStatusClass('addressTab.unit')" id="unit" formControlName="unit"
                   class="form-control" type="text" [mask]="inputMaskPatterns.NUMBER_ONLY"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('addressTab.unit')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="homePhoneNumber"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.home_phone_number}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="20" [ngClass]="fm.getStatusClass('addressTab.homePhoneNumber')" id="homePhoneNumber"
                   formControlName="homePhoneNumber" class="form-control" type="text"
                   [mask]="inputMaskPatterns.NUMBER_ONLY" [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('addressTab.homePhoneNumber')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12">
        <div class="row d-flex flex-column flex-md-row">
          <label for="addressDescription"
                 class="col-sm-12 col-md-2 col-form-label">{{langService.map.lbl_address}}</label>
          <div class="col-md-10 col-sm-12">
            <textarea [ngClass]="fm.getStatusClass('addressTab.addressDescription')" id="addressDescription"
                      formControlName="addressDescription" rows="5" class="form-control"
                      [readOnly]="readOnly || isPartialRequest"></textarea>
            <app-field-error-message
              [control]="fm.getFormField('addressTab.addressDescription')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <!-- request Info Tab -->
  <ng-template formGroupName="requestInfoTab" #requestInfo>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="requestType" asteriskIfRequired="requestType"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.reason_of_request}}</label>
          <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
            <ng-select [selectOnTab]="true" labelForId="requestType" [clearable]="false"
                       [readonly]="readOnly || isPartialRequest"
                       placeholder="{{langService.map.select}}" id="requestType"
                       [notFoundText]="langService.map.msg_not_found"
                       formControlName="requestType"
                       [ngClass]="fm.getStatusClass('requestInfoTab.requestType')">
              <ng-option *ngFor="let option of lookup.listByCategory.SubRequestType" [value]="option.lookupKey">
                {{option.getName()}}
              </ng-option>
            </ng-select>
            <app-field-error-message
              [control]="fm.getFormField('requestInfoTab.requestType')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly">
          <label for="creationDateReadOnly" asteriskIfRequired="creationDate"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.request_date}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <div class="form-control input-disabled" formControlName="creationDate"
                 id="creationDateReadOnly" [options]="datepickerOptionsMap.creationDate"
                 angular-mydatepicker [ngClass]="fm.getStatusClass('requestInfoTab.creationDate')">
            </div>
            <app-field-error-message
              [control]="fm.getFormField('requestInfoTab.creationDate')"></app-field-error-message>
          </div>
        </div>
        <div class="row d-flex flex-column flex-md-row" *ngIf="!readOnly">
          <label for="creationDate" asteriskIfRequired="creationDate"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.request_date}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <div class="input-group">
              <i class="input-group-text mdi mdi-calendar"></i>
              <div class="form-control" formControlName="creationDate"
                   id="creationDate" [options]="datepickerOptionsMap.creationDate"
                   (click)="dpCreationDate.toggleCalendar()" #dpCreationDate="angular-mydatepicker"
                   angular-mydatepicker [ngClass]="fm.getStatusClass('requestInfoTab.creationDate')"></div>
              <app-field-error-message
                [control]="fm.getFormField('requestInfoTab.creationDate')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="requestedAidAmount" asteriskIfRequired="requestedAidAmount"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.request_aid_amount}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <input maxlength="15" [ngClass]="fm.getStatusClass('requestInfoTab.requestedAidAmount')"
                   formControlName="requestedAidAmount" id="requestedAidAmount" class="form-control"
                   [mask]="inputMaskPatterns.SEPARATOR" [thousandSeparator]="inputMaskPatterns.THOUSAND_SEPARATOR"
                   [readOnly]="readOnly || isPartialRequest">
            <app-field-error-message
              [control]="fm.getFormField('requestInfoTab.requestedAidAmount')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6" *ngIf="!isPartialRequest">
        <div class="row d-flex flex-column flex-md-row">
          <div class="col-sm-12 mb-4">
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="allowCompletion" formControlName="allowCompletion">
              <label class="form-check-label"
                     for="allowCompletion">{{langService.map.supplement_amount_with_other_institutes}}</label>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12">
        <div class="row d-flex flex-column flex-md-row">
          <label asteriskIfRequired="requestSummary" for="requestSummary"
                 class="col-sm-12 col-md-2 col-form-label">{{langService.map.request_summary}}</label>
          <div class="col-md-10 col-sm-12">
                  <textarea [ngClass]="fm.getStatusClass('requestInfoTab.requestSummary')" id="requestSummary"
                            formControlName="requestSummary" rows="5" class="form-control"
                            [readOnly]="readOnly || isPartialRequest"></textarea>
            <app-field-error-message
              [control]="fm.getFormField('requestInfoTab.requestSummary')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <!-- Request Status -->
  <ng-template formGroupName="requestStatusTab" #requestStatus>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="requestStatus"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.request_status}}</label>
          <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
            <ng-select [selectOnTab]="true" labelForId="requestStatus" [clearable]="false"
                       [readonly]="readOnly"
                       placeholder="{{langService.map.select}}" id="requestStatus"
                       [notFoundText]="langService.map.msg_not_found"
                       formControlName="status"
                       [ngClass]="fm.getStatusClass('requestStatusTab.status')">
              <ng-option *ngFor="let option of lookup.listByCategory.SubRequestStatus"
                         [disabled]="option.isRemovedSubRequestStatus() || option.isCancelledSubRequestStatus()"
                         [value]="option.lookupKey">
                {{option.getName()}}
              </ng-option>
            </ng-select>
            <app-field-error-message
              [control]="fm.getFormField('requestStatusTab.status')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly">
          <label for="statusDateModifiedReadOnly" asteriskIfRequired="statusDateModified"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.status_date}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <div class="input-group">
              <i class="input-group-text mdi mdi-calendar"></i>
              <div class="form-control input-disabled" formControlName="statusDateModified"
                   id="statusDateModifiedReadOnly" [options]="datepickerOptionsMap.statusDateModified"
                   angular-mydatepicker [ngClass]="fm.getStatusClass('requestStatusTab.statusDateModified')">
              </div>
              <app-field-error-message
                [control]="fm.getFormField('requestStatusTab.statusDateModified')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-column flex-md-row" *ngIf="!readOnly">
          <label for="statusDateModified" asteriskIfRequired="statusDateModified"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.status_date}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <div class="input-group">
              <i class="input-group-text mdi mdi-calendar"></i>
              <div class="form-control" formControlName="statusDateModified"
                   id="statusDateModified" [options]="datepickerOptionsMap.statusDateModified"
                   (click)="dpStatusDateModified.toggleCalendar()" #dpStatusDateModified="angular-mydatepicker"
                   angular-mydatepicker [ngClass]="fm.getStatusClass('requestStatusTab.statusDateModified')"></div>
              <app-field-error-message
                [control]="fm.getFormField('requestStatusTab.statusDateModified')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12">
        <div class="row d-flex flex-column flex-md-row">
          <label for="requestNotes" class="col-sm-12 col-md-2 col-form-label">{{langService.map.notes}}</label>
          <div class="col-md-10 col-sm-12">
            <textarea [ngClass]="fm.getStatusClass('requestStatusTab.requestNotes')" id="requestNotes"
                      formControlName="requestNotes" rows="5" class="form-control"
                      [readOnly]="readOnly"></textarea>
            <app-field-error-message
              [control]="fm.getFormField('requestStatusTab.requestNotes')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <!-- Aid Tab-->
  <ng-template formArrayName="aidTab" #providedAid>
    <ng-container *ngFor="let _ of aidFormArray.controls; let i = index">
      <div [formGroupName]="i">
        <div class="row d-flex flex-row">
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label for="aidType" asteriskIfRequired="aidLookupId"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.aid_type}}</label>
              <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
                <ng-select [selectOnTab]="true" labelForId="aidType" [clearable]="false"
                           [readonly]="readOnly || isPartialRequest"
                           placeholder="{{langService.map.select}}" id="aidType"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="aidLookupId"
                           [ngClass]="fm.getStatusClass('aidTab.0.aidLookupId')">
                  <ng-option *ngFor="let option of subAidLookupsArray" [value]="option.id">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.aidLookupId')"></app-field-error-message>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label for="aidSuggestedAmount" asteriskIfRequired="aidSuggestedAmount"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.estimated_amount}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <input id="aidSuggestedAmount" maxlength="15"
                       [ngClass]="fm.getStatusClass('aidTab.0.aidSuggestedAmount')"
                       formControlName="aidSuggestedAmount" class="form-control" mask="separator" thousandSeparator=","
                       [readOnly]="readOnly || isPartialRequest">
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.aidSuggestedAmount')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-row">
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly">
              <label asteriskIfRequired="approvalDate" for="approvalDateReadOnly"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.approval_date}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <div class="form-control input-disabled" formControlName="approvalDate"
                     id="approvalDateReadOnly" [options]="datepickerOptionsMap.aidApprovalDate"
                     angular-mydatepicker [ngClass]="fm.getStatusClass('aidTab.0.approvalDate')">
                  <app-field-error-message
                    [control]="fm.getFormField('aidTab.0.approvalDate')"></app-field-error-message>
                </div>
              </div>
            </div>
            <div class="row d-flex flex-column flex-md-row" *ngIf="!readOnly">
              <label asteriskIfRequired="approvalDate" for="approvalDate"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.approval_date}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <div class="input-group">
                  <i class="input-group-text mdi mdi-calendar"></i>
                  <div class="form-control" formControlName="approvalDate"
                       id="approvalDate" [options]="datepickerOptionsMap.aidApprovalDate"
                       (click)="dpAidApprovalDate.toggleCalendar()" #dpAidApprovalDate="angular-mydatepicker"
                       angular-mydatepicker [ngClass]="fm.getStatusClass('aidTab.0.approvalDate')"></div>
                  <app-field-error-message
                    [control]="fm.getFormField('aidTab.0.approvalDate')"></app-field-error-message>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly">
              <label asteriskIfRequired="aidStartPayDate" for="aidStartPayDateReadOnly"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.payment_date}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <div class="form-control input-disabled" formControlName="aidStartPayDate"
                     id="aidStartPayDateReadOnly" [options]="datepickerOptionsMap.aidPaymentDate"
                     angular-mydatepicker [ngClass]="fm.getStatusClass('aidTab.0.aidStartPayDate')">
                  <app-field-error-message
                    [control]="fm.getFormField('aidTab.0.aidStartPayDate')"></app-field-error-message>
                </div>
              </div>
            </div>
            <div class="row d-flex flex-column flex-md-row" *ngIf="!readOnly">
              <label asteriskIfRequired="aidStartPayDate" for="aidStartPayDate"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.payment_date}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <div class="input-group">
                  <i class="input-group-text mdi mdi-calendar"></i>
                  <div class="form-control" formControlName="aidStartPayDate"
                       id="aidStartPayDate" [options]="datepickerOptionsMap.aidPaymentDate"
                       (click)="dpAidStartPayDate.toggleCalendar()" #dpAidStartPayDate="angular-mydatepicker"
                       angular-mydatepicker [ngClass]="fm.getStatusClass('aidTab.0.aidStartPayDate')"></div>
                  <app-field-error-message
                    [control]="fm.getFormField('aidTab.0.aidStartPayDate')"></app-field-error-message>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-row">
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label asteriskIfRequired="periodicType" for="periodicType"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.payment_periodicity}}</label>
              <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
                <ng-select [selectOnTab]="true" labelForId="periodicType" [clearable]="false"
                           [readonly]="readOnly"
                           placeholder="{{langService.map.select}}" id="periodicType"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="periodicType"
                           [ngClass]="fm.getStatusClass('aidTab.0.periodicType')">
                  <ng-option *ngFor="let option of lookup.listByCategory.SubAidPeriodicType"
                             [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.periodicType')"></app-field-error-message>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label asteriskIfRequired="installementsCount" for="installementsCount"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.number_of_installments}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <input maxlength="20" [ngClass]="fm.getStatusClass('aidTab.0.installementsCount')"
                       id="installementsCount" [mask]="inputMaskPatterns.NUMBER_ONLY"
                       formControlName="installementsCount" class="form-control"
                       [readOnly]="readOnly">
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.installementsCount')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-row">
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label for="aidAmount" asteriskIfRequired="aidAmount"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.given_amount}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <input id="aidAmount" maxlength="15" [ngClass]="fm.getStatusClass('aidTab.0.aidAmount')"
                       formControlName="aidAmount" class="form-control" [mask]="inputMaskPatterns.SEPARATOR"
                       [thousandSeparator]="inputMaskPatterns.THOUSAND_SEPARATOR"
                       [readOnly]="readOnly">
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.aidAmount')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-row">
          <div class="col-sm-12">
            <div class="row d-flex flex-column flex-md-row">
              <label asteriskIfRequired="aidDescription" for="aidDescription"
                     class="col-sm-12 col-md-2 col-form-label">{{langService.map.lbl_description}}</label>
              <div class="col-md-10 col-sm-12">
                    <textarea [ngClass]="fm.getStatusClass('aidTab.0.aidDescription')" id="aidDescription"
                              formControlName="aidDescription" rows="3" class="form-control"
                              [readOnly]="readOnly"></textarea>
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.aidDescription')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex flex-row align-items-center justify-content-center">
          <button (click)="saveAid()"
                  class="btn btn-primary m-2">{{hasEditAid ? langService.map.btn_save : langService.map.btn_add}}</button>
          <button (click)="cancelAid()"
                  class="btn btn-secondary m-2">{{langService.map.btn_cancel}}</button>
        </div>
      </div>
    </ng-container>
    <app-page-header [hidden]="aidFormArray.controls.length" pageTitle="provided_aid"
                     [clickOnNew$]="addAid$"
                     [addPermission]="!readOnly && !isPartialRequest"></app-page-header>
    <table *ngIf="subventionAid.length" class="table mt-3 table-striped table-bordered caption-top" cdk-table
           [dataSource]="subventionAidDataSource">
      <ng-container cdkColumnDef="approvalDate">
        <th cdk-header-cell *cdkHeaderCellDef class="date-column"> {{langService.map.approval_date}}</th>
        <td cdk-cell *cdkCellDef="let row" class="date-column"> {{row.approvalDateString}} </td>
      </ng-container>
      <ng-container cdkColumnDef="aidLookupId">
        <th cdk-header-cell *cdkHeaderCellDef> {{langService.map.aid_type}}</th>
        <td cdk-cell *cdkCellDef="let row"> {{getAidLookup(row.aidLookupId)?.getName()}} </td>
      </ng-container>
      <ng-container cdkColumnDef="estimatedAmount">
        <th cdk-header-cell *cdkHeaderCellDef> {{langService.map.estimated_amount}}</th>
        <td cdk-cell
            *cdkCellDef="let row"> {{row.aidSuggestedAmount | mask:inputMaskPatterns.SEPARATOR:inputMaskPatterns.THOUSAND_SEPARATOR}} </td>
      </ng-container>
      <ng-container cdkColumnDef="periodicType">
        <th cdk-header-cell *cdkHeaderCellDef> {{langService.map.payment_periodicity}}</th>
        <td cdk-cell *cdkCellDef="let row"> {{getLookup(row.periodicType)?.getName()}} </td>
      </ng-container>
      <ng-container cdkColumnDef="installementsCount">
        <th cdk-header-cell *cdkHeaderCellDef> {{langService.map.number_of_installments}}</th>
        <td cdk-cell *cdkCellDef="let row"> {{row.installementsCount}} </td>
      </ng-container>
      <ng-container cdkColumnDef="aidStartPayDate">
        <th cdk-header-cell *cdkHeaderCellDef class="date-column"> {{langService.map.payment_date}}</th>
        <td cdk-cell *cdkCellDef="let row" class="date-column"> {{row.aidStartPayDateString}} </td>
      </ng-container>
      <ng-container cdkColumnDef="givenAmount">
        <th cdk-header-cell *cdkHeaderCellDef> {{langService.map.given_amount}}</th>
        <td cdk-cell
            *cdkCellDef="let row"> {{row.aidAmount | mask:inputMaskPatterns.SEPARATOR:inputMaskPatterns.THOUSAND_SEPARATOR}} </td>
      </ng-container>
      <ng-container cdkColumnDef="remainingAmount">
        <th cdk-header-cell *cdkHeaderCellDef> {{langService.map.remaining_amount}}</th>
        <td cdk-cell
            *cdkCellDef="let row"> {{row.aidRemainingAmount | mask:inputMaskPatterns.SEPARATOR:inputMaskPatterns.THOUSAND_SEPARATOR}} </td>
      </ng-container>
      <ng-container cdkColumnDef="actions">
        <th cdk-header-cell *cdkHeaderCellDef> {{langService.map.lbl_actions}}</th>
        <td cdk-cell *cdkCellDef="let row; let i = index;" class="table-actions">
          <div class="d-flex flex-row">
            <button *ngIf="!readOnly && !isPartialRequest"
                    (click)="deleteAid(row, i, $event)" class="icon-btn text-primary"
                    tooltip="{{langService.map.btn_delete}}">
              <i class="mdi mdi-close-box"></i>
            </button>
            <button (click)="editAid(row, i, $event)" class="icon-btn text-primary"
                    [disabled]="readOnly"
                    tooltip="{{langService.map.btn_edit}}">
              <i class="mdi mdi-pen"></i>
            </button>
          </div>
        </td>
      </ng-container>
      <tr cdk-header-row *cdkHeaderRowDef="aidColumns"></tr>
      <tr cdk-row *cdkRowDef="let row; columns: aidColumns;"></tr>
    </table>
  </ng-template>
  <!-- Attachments Tab -->
  <ng-template #attachmentsTabTemplate>
    <app-attachment-list [request]="currentRequest"
                         [attachmentList]="attachmentList"
                         [readOnly]="readOnly"
                         (updateList)="updateAttachmentList($event)"
                         (onFormToggle)="isAttachmentFormVisible = $event"
    ></app-attachment-list>
  </ng-template>
  <hr/>
  <div *ngIf="!aidFormArray.controls.length && !isAttachmentFormVisible" class="d-flex flex-row justify-content-center">
    <button *ngIf="saveVisible" [disabled]="!saveButtonEnabled()" type="button" (click)="saveModel()"
            class="btn btn-primary m-2">{{editMode ? langService.map.btn_save : langService.map.btn_add}}</button>
    <button *ngIf="cancelVisible" type="button" (click)="cancelRequest()"
            class="btn btn-secondary m-2">{{langService.map.btn_cancel}}</button>
    <button tabindex="-1" *ngIf="validateFieldsVisible" (click)="fm.displayFormValidity(fm.mainContentId)"
            tooltip="{{langService.map.validate_fields}}" class="btn btn-link">
      <i class="mdi mdi-information-outline text-info"></i>
    </button>
  </div>
</form>
