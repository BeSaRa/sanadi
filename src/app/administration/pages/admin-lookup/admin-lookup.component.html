<div class="row pb-3">
  <app-page-header [customTemplate]="headerTemplate"></app-page-header>
  <ng-container>
    <app-grid-search (searchTextEvent)="filterRecords($event)"></app-grid-search>
  </ng-container>
</div>

<ng-template #headerTemplate>
  <div class="align-items-center">
    <h1 class="h6 text-primary m-0 d-inline-block">{{ lang.map.menu_admin_lookups }}</h1>
    <button class="btn btn-link outline-none" tooltip="{{ lang.map.btn_add }}" (click)="addCallback()">
      <i class="mdi mdi-plus-box"></i>
    </button>
    <button class="btn btn-link" tooltip="{{ lang.map.btn_reload }}" (click)="reloadCallback()">
      <i class="mdi mdi-reload"></i>
    </button>
  </div>
</ng-template>

<tabs-list (onTabChange)="tabChanged($event)">
  <tab [name]="tabsData.workField.name" [template]="workFieldTemplate"
       [title]="getTabLabel(adminLookupTypeEnum.WORK_FIELD)"></tab>
  <tab [name]="tabsData.activityType.name" [template]="activityTypeTemplate"
       [title]="getTabLabel(adminLookupTypeEnum.ACTIVITY_TYPE)"></tab>
  <tab [name]="tabsData.riskClassification.name" [template]="riskClassificationTemplate"
       [title]="getTabLabel(adminLookupTypeEnum.RISK_CLASSIFICATION)"></tab>
  <tab [name]="tabsData.coordinationAndSupportClassification.name" [template]="coordinationAndSupportClassificationTemplate"
       [title]="getTabLabel(adminLookupTypeEnum.COORDINATION_SUPPORT_CLASSIFICATION)"></tab>
  <tab [name]="tabsData.resolutionsIssued.name" [template]="resolutionsIssuedTemplate"
       [title]="getTabLabel(adminLookupTypeEnum.RESOLUTIONS_ISSUED)"></tab>
</tabs-list>

<ng-template #workFieldTemplate>
  <tabs-list (onTabChange)="tabChanged($event)" [tabByIndex$]="selectedWorkFieldTabIndex$">
    <tab [name]="tabsData.ocha.name" [template]="ochaTemplate" [title]="getTabLabel(adminLookupTypeEnum.OCHA)"></tab>
    <tab [name]="tabsData.dac.name" [template]="dacTemplate" [title]="getTabLabel(adminLookupTypeEnum.DAC)"></tab>
  </tabs-list>
</ng-template>

<ng-template #ochaTemplate>
  <admin-lookup-list #ochaListComponent [adminLookupTypeId]="adminLookupTypeEnum.OCHA"
                     (onReady)="setLookupComponentMap($event, ochaListComponent)">
  </admin-lookup-list>
</ng-template>
<ng-template #dacTemplate>
  <admin-lookup-list #dacListComponent [adminLookupTypeId]="adminLookupTypeEnum.DAC"
                     (onReady)="setLookupComponentMap($event, dacListComponent)">
  </admin-lookup-list>
</ng-template>
<ng-template #activityTypeTemplate>
  <admin-lookup-list #activityTypeListComponent [adminLookupTypeId]="adminLookupTypeEnum.ACTIVITY_TYPE"
                     (onReady)="setLookupComponentMap($event, activityTypeListComponent)">
  </admin-lookup-list>
</ng-template>
<ng-template #riskClassificationTemplate>
  <admin-lookup-list #riskClassificationComponent [adminLookupTypeId]="adminLookupTypeEnum.RISK_CLASSIFICATION"
                     (onReady)="setLookupComponentMap($event, riskClassificationComponent)">
  </admin-lookup-list>
</ng-template>
<ng-template #coordinationAndSupportClassificationTemplate>
  <admin-lookup-list #coordinationAndSupportClassificationComponent [adminLookupTypeId]="adminLookupTypeEnum.COORDINATION_SUPPORT_CLASSIFICATION"
                     (onReady)="setLookupComponentMap($event, coordinationAndSupportClassificationComponent)">
  </admin-lookup-list>
</ng-template>
<ng-template #resolutionsIssuedTemplate>
  <admin-lookup-list #resolutionsIssuedComponent [adminLookupTypeId]="adminLookupTypeEnum.RESOLUTIONS_ISSUED"
                     (onReady)="setLookupComponentMap($event, resolutionsIssuedComponent)">
  </admin-lookup-list>
</ng-template>
