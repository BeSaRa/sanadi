<div class="d-flex flex-column">
  <tabs-list [accordionView]="accordionView">
    <tab
      [name]="tabsData.basicInfo.name"
      [hasError]="getTabInvalidStatus('basicInfo')"
      [template]="basicInfoTabTemplate"
      [title]="lang.map.lbl_basic_info"
    ></tab>
    <tab
      *ngIf="!accordionView"
      [name]="tabsData.employeeInfo.name"
      [hasError]="getTabInvalidStatus('employeeInfo')"
      [template]="employeeInfoTabTemplate"
      [title]="lang.map.employee_data"
    ></tab>
    <tab
      *ngIf="!accordionView"
      [name]="tabsData.attachments.name"
      [hasError]="getTabInvalidStatus('attachments')"
      [template]="attachmentsTabTemplate"
      [title]="lang.map.attachments"
    ></tab>
  </tabs-list>

  <ng-template #basicInfoTabTemplate>
    <fieldset [disabled]="readonly">
      <form [formGroup]="form" autocomplete="off">
        <div class="row">
          <div class="col-12 col-md-6 mb-4 position-relative">
            <label
              asteriskIfRequired="category"
              for="category"
              class="form-label"
              >{{ lang.map.order_type }}</label
            >
            <ng-select
              [selectOnTab]="true"
              [clearable]="true"
              placeholder="{{ lang.map.select }}"
              [notFoundText]="lang.map.msg_not_found"
              appendTo="body"
              id="category"
              formControlName="category"
              (change)="handleCategoryChange()"
            >
              <ng-option
                *ngFor="let option of EmploymentCategory"
                [value]="option.lookupKey"
                >{{ option.getName() }}</ng-option
              >
            </ng-select>
            <app-field-error-message
              controlName="category"
            ></app-field-error-message>
          </div>
          <div class="col-12 col-md-6 mb-4 position-relative">
            <label
              asteriskIfRequired="requestType"
              for="requestType"
              labelForId="requestType"
              class="form-label"
              >{{ lang.map.request_type }}</label
            >
            <ng-select
              [selectOnTab]="true"
              [clearable]="true"
              placeholder="{{ lang.map.select }}"
              [notFoundText]="lang.map.msg_not_found"
              appendTo="body"
              id="requestType"
              formControlName="requestType"
              (change)="handleRequestTypeChange()"
            >
              <ng-option
                *ngFor="let option of getRequestTypeList()"
                [value]="option.lookupKey"
                >{{ option.getName() }}</ng-option
              >
            </ng-select>
            <app-field-error-message
              controlName="requestType"
            ></app-field-error-message>
          </div>
        </div>
      </form>
    </fieldset>
  </ng-template>

  <ng-template #employeeInfoTabTemplate>
    <div class="row">
      <div class="col-12 mb-2" *ngIf="category.value">
        <button class="btn btn-primary px-3" (click)="openForm()">
          {{ lang.map.adding_employees }}
        </button>
      </div>
      <div class="col-12">
        <app-employees-data #ETable [actions]="actions"></app-employees-data>
      </div>
    </div>
  </ng-template>
  <ng-template #attachmentsTabTemplate>
    <!-- <div class="d-flex flex-row align-items-center justify-content-start">
      <button [disabled]="isAttachmentReadonly()" (click)="attachmentsCtrl.openUploadDialog()"
              class="d-inline-block btn p-0 icon-btn"><i
        class="mdi mdi-plus-box text-primary"></i></button>
    </div>
    <app-documents #attachmentsCtrl [caseId]="model?.id" [service]="service.documentService"
                   [readonly]="isAttachmentReadonly()"></app-documents> -->
  </ng-template>
</div>
