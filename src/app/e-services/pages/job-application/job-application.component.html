<div class="d-flex flex-column">
  <tabs-list [accordionView]="accordionView">
    <tab
      [name]="tabsData.basicInfo.name"
      [hasError]="getTabInvalidStatus('basicInfo')"
      [template]="basicInfoTabTemplate"
      [title]="lang.map.lbl_basic_info"
    ></tab>
    <tab
      *ngIf="!accordionView"
      [name]="tabsData.employeeInfo.name"
      [hasError]="getTabInvalidStatus('employeeInfo')"
      [template]="employeeInfoTabTemplate"
      [title]="lang.map.employee_data"
    ></tab>
  </tabs-list>

  <ng-template #basicInfoTabTemplate>
    <fieldset [disabled]="readonly">
      <form [formGroup]="form" autocomplete="off">
        <div class="row">
          <div class="col-12 col-md-6 mb-4 position-relative">
            <label
              asteriskIfRequired="category"
              for="category"
              class="form-label"
              >{{ lang.map.order_type }}</label
            >
            <ng-select
              [selectOnTab]="true"
              [clearable]="true"
              placeholder="{{ lang.map.select }}"
              [notFoundText]="lang.map.msg_not_found"
              appendTo="body"
              id="category"
              formControlName="category"
              (change)="handleCategoryChange()"
            >
              <ng-option
                *ngFor="let option of EmploymentCategory"
                [value]="option.lookupKey"
                >{{ option.getName() }}</ng-option
              >
            </ng-select>
            <app-field-error-message
              controlName="category"
            ></app-field-error-message>
          </div>
          <div class="col-12 col-md-6 mb-4 position-relative">
            <label
              asteriskIfRequired="requestType"
              for="requestType"
              labelForId="requestType"
              class="form-label"
              >{{ lang.map.request_type }}</label
            >
            <ng-select
              [selectOnTab]="true"
              [clearable]="true"
              placeholder="{{ lang.map.select }}"
              [notFoundText]="lang.map.msg_not_found"
              appendTo="body"
              id="requestType"
              formControlName="requestType"
            >
              <ng-option
                *ngFor="let option of getRequestTypeList()"
                [value]="option.lookupKey"
                >{{ option.getName() }}</ng-option
              >
            </ng-select>
            <app-field-error-message
              controlName="requestType"
            ></app-field-error-message>
          </div>
          <div class="col-12 mb-4 position-relative">
            <label
              asteriskIfRequired="description"
              for="description"
              class="form-label"
              >{{ lang.map.lbl_description }}</label
            >
            <textarea
              rows="5"
              id="description"
              validationClasses="description"
              formControlName="description"
              class="form-control"
              trimInput
            ></textarea>
            <app-field-error-message
              controlName="description"
            ></app-field-error-message>
          </div>

        </div>
      </form>
    </fieldset>
  </ng-template>

  <ng-template #employeeInfoTabTemplate>
    <div class="row">
      <div class="col-12 mb-2" *ngIf="category.value">
        <button class="btn btn-primary px-3" (click)="openForm()">
          {{ lang.map.adding_employees }}
        </button>
      </div>
      <div class="col-12">
        <app-employees-data
          #ETable
          [employees]="employees"
          [actions]="[]"
        ></app-employees-data>
      </div>
    </div>
  </ng-template>
</div>
