<tabs-list [accordionView]="accordionView" [hasForm]="true">
     <tab [name]="tabsData.incidents.name" [hasError]="getTabInvalidStatus(tabsData.incidents.name)"
          [template]="incidentsTab" [title]="lang.map.lbl_incidence_elements">
     </tab>
     <tab [name]="tabsData.incidentRelation.name" [hasError]="getTabInvalidStatus(tabsData.incidentRelation.name)"
          [template]="incidentRelationTab" [title]="lang.map.lbl_incident_relation">
     </tab>
     <tab [name]="tabsData.incidentReport.name" [hasError]="getTabInvalidStatus(tabsData.incidentReport.name)"
          [template]="incidentReportTab" [title]="lang.map.lbl_incident_reports">
     </tab>
     <tab [name]="tabsData.legalBasis.name" [hasError]="getTabInvalidStatus(tabsData.legalBasis.name)"
          [template]="legalBasisTab" [title]="lang.map.menu_legal_basis">
     </tab>
     <tab [name]="tabsData.legalActions.name" [hasError]="getTabInvalidStatus(tabsData.legalActions.name)"
          [template]="legalActionsTab" [title]="lang.map.menu_legal_action">
     </tab>
     <tab [name]="tabsData.proposedSanctions.name" [hasError]="getTabInvalidStatus(tabsData.proposedSanctions.name)"
          [template]="proposedSanctionsTab" [title]="lang.map.menu_penalties">
     </tab>
     <tab [name]="tabsData.specialExplanations.name" [hasError]="getTabInvalidStatus('specialExplanations')"
          [template]="specialExplanationsTab" [title]="lang.map.special_explanations"></tab>

</tabs-list>

<ng-container [formGroup]="form">
     <ng-template #incidentsTab>
          <incident-elements formControlName="incidents"></incident-elements>
     </ng-template>
     <ng-template #incidentRelationTab>
          <div class="row">
               @if(!model?.id){
               <div class="col-md-4 col-sm-12 mb-4 position-relative">
                    <label class="form-label" asteriskIfRequired="competentTeamID"
                         for="competentTeamID">{{lang.map.lbl_team}}</label>
                    <ng-select [readonly]="readonly" validationClasses="competentTeamID" appendTo="body"
                         [clearable]="false" id="competentTeamID" formControlName="competentTeamID">
                         <ng-option [value]="option.id" *ngFor="let option of (teams$ | async)">{{option.getName()}}</ng-option>
                    </ng-select>
                    <app-field-error-message controlName="competentTeamID"></app-field-error-message>
               </div>
               }

               <div class="col-md-4 col-sm-12 mb-4 position-relative">
                    <label class="form-label" asteriskIfRequired="entityType"
                         for="entityType">{{lang.map.lbl_incident_relation}}</label>
                    <ng-select [readonly]="readonly || model?.id" validationClasses="entityType" appendTo="body" [clearable]="false"
                         id="entityType" formControlName="entityType">
                         <ng-option [value]="option.lookupKey"
                              *ngFor="let option of entityTypes">{{option.getName()}}</ng-option>
                    </ng-select>
                    <app-field-error-message controlName="entityType"></app-field-error-message>
               </div>
               @if(isCharitiesEntityType){
               <!-- organization Id -->
               <div class="col-sm-12 col-md-4 mb-4 position-relative">
                    <label asteriskIfRequired="organizationId" for="organizationId"
                         class="form-label">{{lang.map.lbl_organization_slash_association}}</label>
                    <ng-select [selectOnTab]="true" labelForId="organizationId" [clearable]="true"
                         placeholder="{{lang.map.select}}" id="organizationId" [notFoundText]="lang.map.msg_not_found"
                         [readonly]="readonly || model?.id" appendTo="body" formControlName="organizationId"
                         validationClasses="organizationId">
                         <ng-option [value]="org.id" [disabled]="!org.isActive()"
                              *ngFor="let org of organizations()">{{org.getName()}}</ng-option>
                    </ng-select>
                    <app-field-error-message controlName="organizationId"></app-field-error-message>
               </div>
               }

          </div>
          @if (isOtherEntitiesEntityType) {
          <external-entities formControlName="externalEntityDTO" [readonly]="readonly"></external-entities>
          }
     </ng-template>
     <ng-template #incidentReportTab>
          <incident-reports formControlName="incidentReport"></incident-reports>
     </ng-template>
     <ng-template #legalBasisTab>
          <penalty-legal-basis formControlName="legalBasis"></penalty-legal-basis>
     </ng-template>
     <ng-template #legalActionsTab>
          <legal-actions formControlName="legalAction"></legal-actions>
     </ng-template>
     <ng-template #proposedSanctionsTab>
          <proposed-sanctions formControlName="proposedSanction"></proposed-sanctions>
     </ng-template>
     <ng-template #specialExplanationsTab>
          <div class="row">
               <div class="col-sm-12 col-md-12 mb-4 position-relative">
                    <label for="description" asteriskIfRequired="description"
                         class="form-label">{{lang.map.special_explanations}}</label>
                    <textarea rows="5" id="description" validationClasses="description"
                         [maxlength]="customValidators.defaultLengths.EXPLANATIONS" [readOnly]="(readonly)"
                         formControlName="description" trimInput class="form-control"></textarea>
                    <app-field-error-message controlName="description"></app-field-error-message>
               </div>
          </div>
     </ng-template>


</ng-container>