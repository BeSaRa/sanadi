<div class="row">
  <div class="d-flex">
    <h1 class="h6 text-primary mb-2">{{lang.map.payments}}</h1>
    <button (click)="!disabled && openAddPaymentDialog()" class="btn icon-btn">
      <i class="mdi mdi-plus-box text-primary"></i>
    </button>
  </div>
  <ng-container [formGroup]="form">
    <app-table #table
               [useSearchToFilter]="true"
               [data]="value"
               [columns]="displayedColumns">
      <table cdk-table [dataSource]="table.dataSource" class="table table-striped table-bordered caption-top">
        <ng-container cdkColumnDef="paymentNo">
          <th cdk-header-cell *cdkHeaderCellDef> {{lang.map.payment_name}}</th>
          <td cdk-cell *cdkCellDef="let row"> {{row.paymentNo}} </td>
        </ng-container>
        <ng-container cdkColumnDef="notes">
          <th cdk-header-cell *cdkHeaderCellDef> {{lang.map.notes}}</th>
          <td cdk-cell *cdkCellDef="let row"> {{row.notes}} </td>
        </ng-container>
        <ng-container cdkColumnDef="dueDate">
          <th cdk-header-cell *cdkHeaderCellDef> {{lang.map.due_date}}</th>
          <td cdk-cell *cdkCellDef="let row"> {{row.dueDate|date: 'mediumDate'}} </td>
        </ng-container>
        <ng-container cdkColumnDef="totalCost">
          <th cdk-header-cell style="width:120px" *cdkHeaderCellDef> {{lang.map.total_cost}}</th>
          <td cdk-cell
              *cdkCellDef="let row; let i = index">
            <ng-container formArrayName="inputs">
              <input class="form-control form-control-sm" [formControlName]="i"
                     [mask]="inputMask.SEPARATOR"
                     [thousandSeparator]="inputMask.THOUSAND_SEPARATOR"
                     [dropSpecialCharacters]="[',']">
            </ng-container>
          </td>
        </ng-container>
        <ng-container cdkColumnDef="actions">
          <th cdk-header-cell style="width:120px" *cdkHeaderCellDef> {{lang.map.lbl_actions}}</th>
          <td cdk-cell *cdkCellDef="let row ; let i = index">
            <button (click)="!disabled && deleteItem(row , i)" [title]="lang.map.btn_delete" class="btn icon-btn">
              <i class="mdi mdi-trash-can text-primary"></i>
            </button>
            <button [disabled]="disabled" (click)="!disabled && editItem(row , i)" [title]="lang.map.btn_edit"
                    class="btn icon-btn">
              <i class="mdi mdi-pen text-primary"></i>
            </button>
          </td>
        </ng-container>
        <tr cdk-header-row class="table-row-header" *cdkHeaderRowDef="displayedColumns"></tr>
        <tr cdk-row *cdkRowDef="let row; columns: displayedColumns;"></tr>
        <tr *cdkNoDataRow>
          <td colspan="20">{{lang.map.no_records_to_display}}</td>
        </tr>
      </table>
    </app-table>
  </ng-container>
</div>
