<div class="row">
  <tabs-list [accordionView]="accordionView">
    <tab [name]="tabsData.basicInfo.name" [hasError]="getTabInvalidStatus('basicInfo')"
      [template]="basicInfoTabTemplate" [title]="lang.map.lbl_basic_info"></tab>
    <tab [name]="tabsData.interventionAreas.name" [hasError]="getTabInvalidStatus('interventionAreas')"
      [template]="interventionAreasTabTemplate" [title]="lang.map.intervention_areas"></tab>
    <tab [name]="tabsData.interventionFields.name" [hasError]="getTabInvalidStatus('interventionFields')"
      [template]="interventionFieldsTabTemplate" [title]="lang.map.intervention_fields"></tab>
      <tab [name]="tabsData.transferData.name" [hasError]="getTabInvalidStatus('transferData')"
        [template]="transferDataTabTemplate" [title]="lang.map.transfer_data"></tab>
    <tab *ngIf="!accordionView" [name]="tabsData.attachments.name" [hasError]="getTabInvalidStatus('attachments')"
        [template]="attachmentsTab" [title]="lang.map.attachments"></tab>
  </tabs-list>
</div>
<ng-container [formGroup]="form">
  <ng-template #basicInfoTabTemplate>
    <ng-container formGroupName="basicInfo">
      <div>
        <div class="row mb-4">
          <div class="col-sm-12 col-md-4 mb-4 position-relative">
            <label for="requestType" asteriskIfRequired="requestType"
                  class="form-label">{{lang.map.request_type}}</label>
            <ng-select [selectOnTab]="true" labelForId="requestType"
                      placeholder="{{lang.map.select}}" id="requestType"
                      [notFoundText]="lang.map.msg_not_found"
                      appendTo="body"
                      formControlName="requestType"
                      validationClasses="requestType">
              <ng-option *ngFor="let option of requestTypesList" [value]="option.lookupKey">
                {{option.getName()}}
              </ng-option>
            </ng-select>
            <app-field-error-message controlName="requestType"></app-field-error-message>
          </div>
          <div class="col-sm-12 col-md-4 mb-4 position-relative">
            <label for="oldLicenseFullSerial" asteriskIfRequired="oldLicenseFullSerial"
                  class="form-label">{{lang.map.notification_request_number}}</label>
            <div class="input-group">
              <input (keydown.enter)="isEditLicenseAllowed() && licenseSearch($event)"
                    formControlName="oldLicenseFullSerial"
                    type="text" [readOnly]="!isEditLicenseAllowed()"
                    validationClasses="oldLicenseFullSerial" [onlyInvalid]="false" class="form-control"
                    id="oldLicenseFullSerial" trimInput>
              <button type="button" (click)="licenseSearch($event)" class="input-group-text">
                <i class="mdi {{fileIconsEnum.SEARCH}} text-primary"></i>
              </button>
              <app-field-error-message controlName="oldLicenseFullSerial"></app-field-error-message>
            </div>
          </div>
          <div class="col-sm-12 col-md-4 mb-4 position-relative">
            <label for="interventionName" class="form-label">{{lang.map.intervention_name}}</label>
            <input [value]="model!.interventionName" class="form-control" type="text"
                  readonly id="interventionName">
          </div>
        </div>
        <div class="row mb-4">
          <div class="col-sm-12">
            <h2 class="h6 text-primary">{{lang.map.beneficiary_country_info}}</h2>
            <hr>
          </div>
          <div class="col-md-6 col-sm-12">
            <label for="beneficiaryCountry" class="form-label">{{lang.map.country}}</label>
            <input class="form-control" [value]="model?.beneficiaryCountryInfo?.getName()" type="text" readonly id="beneficiaryCountry">
          </div>
          <div class="col-md-6 col-sm-12">
            <label class="form-label" for="beneficiaryRegion">{{lang.map.region}}</label>
            <input id="beneficiaryRegion" [value]="model!.beneficiaryRegion" class="form-control" readonly>
          </div>
        </div>
        <div class="row mb-4">
          <div class="col-sm-12">
            <h2 class="h6 text-primary">{{lang.map.execution_country_info}}</h2>
            <hr>
          </div>
          <div class="col-md-6 col-sm-12">
            <label class="form-label" for="executionCountry">{{lang.map.country}}</label>
            <input id="executionCountry" [value]="model?.executionCountryInfo?.getName()" class="form-control" readonly>
          </div>
          <div class="col-md-6 col-sm-12">
            <label class="form-label" for="executionRegion">{{lang.map.region}}</label>
            <input id="executionRegion" [value]="model!.executionRegion" class="form-control" readonly>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12">
            <hr>
          </div>
          <div class="col-sm-12 mb-4 position-relative">
            <label for="projectDescription" class="form-label">{{lang.map.lbl_description}}</label>
            <textarea class="form-control" rows="4" readonly [value]="model!.projectDescription" id="projectDescription"></textarea>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 mb-4 position-relative">
            <label for="description" class="form-label">{{lang.map.special_explanations}}</label>
            <textarea class="form-control" rows="4" readonly [value]="model!.description  " id="description"></textarea>
          </div>
        </div>
      </div>
    </ng-container>
  </ng-template>
  <ng-template #interventionAreasTabTemplate>
    <intervention-region-list #interventionRegionListComponent
                              [list]="(!model ? [] : model.interventionRegionList)"
                              [readonly]="true"
                              (readyEvent)="interventionAreasTabStatus = $event"></intervention-region-list>
  </ng-template>
  <ng-template #interventionFieldsTabTemplate>
    <intervention-field-list #interventionFieldListComponent
                             [list]="(!model ? [] : model.interventionFieldList)"
                             [readonly]="true"
                             (readyEvent)="interventionFieldsTabStatus = $event"></intervention-field-list>
  </ng-template>
  <ng-template #transferDataTabTemplate>
asdasd
  </ng-template>
  <ng-template #attachmentsTab>
    <attachments [disabled]="isAttachmentReadonly()" [caseId]="model?.id" [caseType]="model?.caseType"
                 [service]="service.documentService"
                 [load]="loadAttachments"></attachments>
  </ng-template>
</ng-container>
