<div class="row">
  <div class="col-12 d-flex align-items-center">
    <h1 *ngIf="!!currentRequest?.id"
        class="h6 text-primary m-0 d-inline-block">{{langService.map.request_number + ' : '}}
      <span class="user-select-all">{{currentRequest?.requestFullSerial}}</span></h1>
    <h1 *ngIf="!currentRequest?.id"
        class="h6 text-primary m-0 d-inline-block">{{langService.map.menu_provide_request}}</h1>
    <button [tooltip]="langService.map.print_request_form" *ngIf="currentRequest?.id"
            (click)="currentRequest?.printRequest('request.pdf' , $event)"
            class="icon-btn text-primary"><i class="mdi mdi-printer"></i></button>
  </div>
</div>
<form autocomplete="off" [formGroup]="form" id="form" (keydown.enter)="$event.preventDefault()">

  <tabs-list class="py-4">
    <tab [name]="tabsData.personal.name" [hasError]="fm.getFieldInvalidStatus('personalTab')"
         [template]="personalInfo" [title]="langService.map.personal_info"></tab>
    <tab [name]="tabsData.address.name" [hasError]="getTabInvalidStatus('address')"
         [template]="address" [title]="langService.map.lbl_address"></tab>
    <tab [name]="tabsData.income.name" [hasError]="getTabInvalidStatus('income')"
         [template]="income" [title]="langService.map.income_obligation"></tab>
    <tab [name]="tabsData.requestInfo.name" [hasError]="fm.getFieldInvalidStatus('requestInfoTab')"
         [template]="requestInfo" [title]="langService.map.request_info"></tab>
    <tab [name]="tabsData.aids.name" [disabled]="isProvidedAidDisabled()"
         *ngIf="!!currentRequest?.id || currentRequest?.isNewPartialRequest()"
         [hasError]="fm.getFieldInvalidStatus('aidTab')"
         [template]="providedAid" [title]="langService.map.provided_aid"></tab>
    <tab [name]="tabsData.requestStatus.name" *ngIf="!!currentRequest?.id || currentRequest?.isNewPartialRequest()"
         [hasError]="fm.getFieldInvalidStatus('requestStatusTab')"
         [template]="requestStatus" [title]="langService.map.request_status"></tab>
    <tab [name]="tabsData.attachments.name" *ngIf="!!currentRequest?.id || currentRequest?.isNewPartialRequest()"
         [hasError]="fm.getFieldInvalidStatus('attachmentsTab')"
         [template]="attachmentsTabTemplate" [title]="langService.map.attachments"></tab>
  </tabs-list>
  <!--  personal info Tab -->
  <ng-template #personalInfo>
    <div formGroupName="personalTab">
      <!--Primary Id-->
      <div class="row d-flex flex-row">
        <div class="col-sm-12">
          <h6 class="text-primary">{{langService.map.beneficiary_primary_id}}</h6>
          <div class="row d-flex flex-column flex-md-row">
            <div class="col-md-4 col-sm-12 mb-4">
              <label for="benPrimaryIdType" class="form-label"
                     asteriskIfRequired="benPrimaryIdType">{{langService.map.id_type}}</label>
              <ng-select [selectOnTab]="true" labelForId="benPrimaryIdType" [clearable]="false"
                         [readonly]="beneficiaryPrimaryIdDisabled()"
                         placeholder="{{langService.map.select}}" id="benPrimaryIdType"
                         [notFoundText]="langService.map.msg_not_found" appendTo="body"
                         formControlName="benPrimaryIdType">
                <ng-option *ngFor="let option of idTypes" [value]="option.lookupKey"
                           [disabled]="isPrimaryIdTypeDisabled(option.lookupKey)">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benPrimaryIdType')"></app-field-error-message>
            </div>
            <div class="col-md-4 col-sm-12 mb-4">
              <label for="benPrimaryIdNumber" class="form-label"
                     asteriskIfRequired="benPrimaryIdNumber">{{langService.map.id_number}}</label>
              <div class="input-group has-validation">
                <input formControlName="benPrimaryIdNumber" id="benPrimaryIdNumber" class="form-control"
                       type="text" [ngClass]="fm.getInvalidClass('personalTab.benPrimaryIdNumber')"
                       (keyup)="disableEnter($event)" maxlength="20" trimInput
                       [readOnly]="beneficiaryPrimaryIdDisabled()">
                <button tabindex="-1" type="button"
                        [disabled]="readOnly || editMode || primaryIdNumberField?.invalid || primaryNationalityField?.invalid"
                        (click)="getBeneficiaryData($event)" class="input-group-text">
                  <i class="mdi mdi-account-search text-primary"></i>
                </button>
                <app-field-error-message
                  [control]="fm.getFormField('personalTab.benPrimaryIdNumber')"></app-field-error-message>
              </div>
            </div>
            <div class="col-md-4 col-sm-12 mb-4" *ngIf="displayPrimaryNationality">
              <ng-container *ngIf="primaryNationalityListType === 'normal'">
                <label for="benPrimaryIdNationality" class="form-label"
                       asteriskIfRequired="benPrimaryIdNationality">{{langService.map.lbl_nationality}}</label>
                <ng-select [selectOnTab]="true" labelForId="benPrimaryIdNationality" [clearable]="false"
                           [readonly]="beneficiaryPrimaryIdDisabled(true)" appendTo="body"
                           placeholder="{{langService.map.select}}" id="benPrimaryIdNationality"
                           [notFoundText]="langService.map.msg_not_found" formControlName="benPrimaryIdNationality"
                           [ngClass]="fm.getStatusClass('personalTab.benPrimaryIdNationality')">
                  <ng-option *ngFor="let option of lookup.listByCategory.Nationality" [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
              </ng-container>
              <ng-container *ngIf="primaryNationalityListType === 'gulf'">
                <label for="benPrimaryIdNationalityGulf" class="form-label"
                       asteriskIfRequired="benPrimaryIdNationality">{{langService.map.country}}</label>
                <ng-select [selectOnTab]="true" labelForId="benPrimaryIdNationalityGulf" [clearable]="false"
                           [readonly]="beneficiaryPrimaryIdDisabled(true)" appendTo="body"
                           placeholder="{{langService.map.select}}" id="benPrimaryIdNationalityGulf"
                           [notFoundText]="langService.map.msg_not_found" formControlName="benPrimaryIdNationality"
                           [ngClass]="fm.getStatusClass('personalTab.benPrimaryIdNationality')">
                  <ng-option *ngFor="let option of lookup.listByCategory.GulfCountries" [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
              </ng-container>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benPrimaryIdNationality')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <!--Secondary Id-->
      <div class="row d-flex flex-row">
        <div class="col-sm-12">
          <h6 class="text-primary">{{langService.map.beneficiary_secondary_id}}</h6>
          <div class="row d-flex flex-column flex-md-row">
            <div class="col-md-4 col-sm-12 mb-4">
              <label for="benSecIdType" class="form-label"
                     asteriskIfRequired="benSecIdType">{{langService.map.id_type}}</label>
              <ng-select [selectOnTab]="true" labelForId="benSecIdType" [clearable]="false"
                         [readonly]="beneficiarySecondaryIdDisabled()" appendTo="body"
                         placeholder="{{langService.map.select}}" id="benSecIdType"
                         [notFoundText]="langService.map.msg_not_found" formControlName="benSecIdType">
                <ng-option value="">{{langService.map.lbl_none}}</ng-option>
                <ng-option *ngFor="let option of idTypes" [value]="option.lookupKey"
                           [disabled]="isSecondaryIdTypeDisabled(option.lookupKey)">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
            </div>
            <div class="col-md-4 col-sm-12 mb-4">
              <label for="benSecIdNumber" class="form-label"
                     asteriskIfRequired="benSecIdNumber">{{langService.map.id_number}}</label>
              <input formControlName="benSecIdNumber" id="benSecIdNumber" class="form-control" type="text"
                     [readOnly]="beneficiarySecondaryIdDisabled()" maxlength="20" trimInput
                     [ngClass]="fm.getInvalidClass('personalTab.benSecIdNumber')" (keyup)="disableEnter($event)">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benSecIdNumber')"></app-field-error-message>
            </div>
            <div class="col-md-4 col-sm-12 mb-4" *ngIf="displaySecondaryNationality">
              <ng-container *ngIf="secondaryNationalityListType === 'normal'">
                <label for="benSecIdNationality" class="form-label"
                       asteriskIfRequired="benSecIdNationality">{{langService.map.lbl_nationality}}</label>
                <ng-select [selectOnTab]="true" labelForId="benSecIdNationality" [clearable]="false"
                           [readonly]="beneficiarySecondaryIdDisabled(true)"
                           placeholder="{{langService.map.select}}" id="benSecIdNationality"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="benSecIdNationality" appendTo="body"
                           [ngClass]="fm.getStatusClass('personalTab.benSecIdNationality')">
                  <ng-option value="">{{langService.map.lbl_none}}</ng-option>
                  <ng-option *ngFor="let option of lookup.listByCategory.Nationality" [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
              </ng-container>
              <ng-container *ngIf="secondaryNationalityListType === 'gulf'">
                <label for="benSecIdNationalityGulf" class="form-label"
                       asteriskIfRequired="benSecIdNationality">{{langService.map.country}}</label>
                <ng-select [selectOnTab]="true" labelForId="benSecIdNationalityGulf" [clearable]="false"
                           [readonly]="beneficiarySecondaryIdDisabled(true)"
                           placeholder="{{langService.map.select}}" id="benSecIdNationalityGulf"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="benSecIdNationality" appendTo="body"
                           [ngClass]="fm.getStatusClass('personalTab.benSecIdNationality')">
                  <ng-option value="">{{langService.map.lbl_none}}</ng-option>
                  <ng-option *ngFor="let option of lookup.listByCategory.GulfCountries" [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
              </ng-container>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benSecIdNationality')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <hr class="mt-0"/>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label asteriskIfRequired="arName" for="arName"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.arabic_name}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input id="arName" [ngClass]="fm.getStatusClass('personalTab.arName')" formControlName="arName"
                     trimInput class="form-control" type="text" [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.arName')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label asteriskIfRequired="enName" for="enName"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.english_name}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input id="enName" [ngClass]="fm.getStatusClass('personalTab.enName')" formControlName="enName"
                     trimInput class="form-control" type="text" [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.enName')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly || isPartialRequest">
            <label for="dateOfBirthReadOnly" asteriskIfRequired="dateOfBirth"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.date_of_birth}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <div class="input-group">
                <i class="input-group-text mdi mdi-calendar"></i>
                <div class="form-control input-disabled" formControlName="dateOfBirth"
                     id="dateOfBirthReadOnly" [options]="datepickerOptionsMap.dateOfBirth"
                     angular-mydatepicker [ngClass]="fm.getStatusClass('personalTab.dateOfBirth')">
                </div>
                <app-field-error-message
                  [control]="fm.getFormField('personalTab.dateOfBirth')"></app-field-error-message>
              </div>
            </div>
          </div>
          <div class="row d-flex flex-column flex-md-row" *ngIf="!(readOnly || isPartialRequest)">
            <label for="dateOfBirth" asteriskIfRequired="dateOfBirth"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.date_of_birth}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <div class="input-group">
                <i class="input-group-text mdi mdi-calendar"></i>
                <div class="form-control" formControlName="dateOfBirth"
                     id="dateOfBirth" [options]="datepickerOptionsMap.dateOfBirth"
                     (click)="dpDateOfBirth.toggleCalendar()" #dpDateOfBirth="angular-mydatepicker"
                     angular-mydatepicker [ngClass]="fm.getStatusClass('personalTab.dateOfBirth')"></div>
                <app-field-error-message
                  [control]="fm.getFormField('personalTab.dateOfBirth')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="gender" asteriskIfRequired="gender"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.gender}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="gender" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="gender"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="gender" appendTo="body"
                         [ngClass]="fm.getStatusClass('personalTab.gender')">
                <ng-option *ngFor="let option of lookup.listByCategory.Gender" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.gender')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="mobile" asteriskIfRequired="phoneNumber1"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.mobile_number}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input [ngClass]="fm.getStatusClass('personalTab.phoneNumber1')" id="mobile"
                     formControlName="phoneNumber1" class="form-control" type="text"
                     trimInput [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.phoneNumber1')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="nationality" asteriskIfRequired="benNationality"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.lbl_nationality}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="nationality" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="nationality"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="benNationality" appendTo="body"
                         [ngClass]="fm.getStatusClass('personalTab.benNationality')">
                <ng-option *ngFor="let option of lookup.listByCategory.Nationality" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benNationality')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="sponsorsCount" asteriskIfRequired="benDependentsCount"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.sponsors_count}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input maxlength="2" id="sponsorsCount"
                     [ngClass]="fm.getStatusClass('personalTab.benDependentsCount')"
                     formControlName="benDependentsCount" class="form-control"
                     [mask]="inputMaskPatterns.NUMBER_ONLY" [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benDependentsCount')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="mobile" asteriskIfRequired="familyCount"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.family_member_count}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input maxlength="2" id="familyCount"
                     [ngClass]="fm.getStatusClass('personalTab.familyCount')"
                     formControlName="familyCount" class="form-control"
                     [mask]="inputMaskPatterns.NUMBER_ONLY" [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.familyCount')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="maritalStatus" asteriskIfRequired="maritalStatus"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.marital_status}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="maritalStatus" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="maritalStatus"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="maritalStatus" appendTo="body"
                         [ngClass]="fm.getStatusClass('personalTab.maritalStatus')">
                <ng-option *ngFor="let option of lookup.listByCategory.BenMaritialStatus" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.maritalStatus')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="educationLevel" asteriskIfRequired="educationLevel"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.educational_level}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="educationLevel" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="educationLevel"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="educationLevel" appendTo="body"
                         [ngClass]="fm.getStatusClass('personalTab.educationLevel')">
                <ng-option *ngFor="let option of lookup.listByCategory.BenEducationLevel" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.educationLevel')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="employer" asteriskIfRequired="employeer"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.employer}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input maxlength="100" id="employer" [ngClass]="fm.getStatusClass('personalTab.employeer')"
                     formControlName="employeer" class="form-control" type="text"
                     [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.employeer')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="employmentStatus" asteriskIfRequired="occuptionStatus"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.employment_status}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="employmentStatus" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="employmentStatus"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="occuptionStatus" appendTo="body"
                         [ngClass]="fm.getStatusClass('personalTab.occuptionStatus')">
                <ng-option *ngFor="let option of lookup.listByCategory.BenOccuptionStatus" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.occuptionStatus')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label asteriskIfRequired="occuption" for="occupation"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.occupation}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input id="occupation" maxlength="100" [ngClass]="fm.getStatusClass('personalTab.occuption')"
                     formControlName="occuption" class="form-control" type="text"
                     [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.occuption')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="workplace" asteriskIfRequired="employeerAddress"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.workplace}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input maxlength="512" [ngClass]="fm.getStatusClass('personalTab.employeerAddress')"
                     formControlName="employeerAddress" id="workplace" class="form-control" type="text"
                     [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('personalTab.employeerAddress')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12">
          <div class="row d-flex flex-column flex-md-row">
            <label for="benNotes" class="col-sm-12 col-md-2 col-form-label">{{langService.map.notes}}</label>
            <div class="col-md-10 col-sm-12">
                    <textarea id="benNotes" formControlName="benNotes" rows="5" class="form-control"
                              [ngClass]="fm.getStatusClass('personalTab.benNotes')"
                              [readOnly]="readOnly || isPartialRequest"></textarea>
              <app-field-error-message
                [control]="fm.getFormField('personalTab.benNotes')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <!-- income Tab  -->
  <ng-template #income>
    <h6 class="text-primary">{{langService.map.beneficiary_obligations}}</h6>
    <hr class="mt-0">
    <div>
      <beneficiary-obligation #beneficiaryObligations
                              [beneficiary]="currentBeneficiary"
                              [list]="!currentBeneficiary ? [] : currentBeneficiary.beneficiaryObligationSet"
                              [readonly]="readOnly || isPartialRequest"
                              (readyEvent)="beneficiaryObligationsStatus = $event">
      </beneficiary-obligation>
    </div>
    <h6 class="text-primary">{{langService.map.beneficiary_incomes}}</h6>
    <hr class="mt-0">
    <div>
      <beneficiary-income #beneficiaryIncomes
                          [beneficiary]="currentBeneficiary"
                          [list]="!currentBeneficiary ? [] : currentBeneficiary.beneficiaryIncomeSet"
                          [readonly]="readOnly || isPartialRequest"
                          (readyEvent)="beneficiaryObligationsStatus = $event">
      </beneficiary-income>
    </div>
  </ng-template>
  <!-- address Tab  -->
  <ng-template formGroupName="addressTab" #address>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="col-sm-12 ">
          <div class="row d-flex flex-column flex-md-row">
            <label for="city" asteriskIfRequired="residenceCountry"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.city}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="city" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="city"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="residenceCountry" appendTo="body"
                         [ngClass]="fm.getStatusClass('addressTab.residenceCountry')">
                <ng-option *ngFor="let option of lookup.listByCategory.Countries" [value]="option.lookupKey">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('addressTab.residenceCountry')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="row d-flex flex-column flex-md-row">
            <label for="addressDescription"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.lbl_address}}</label>
            <div class="col-md-8 col-sm-12 mb-4 position-relative">
              <textarea [ngClass]="fm.getStatusClass('addressTab.addressDescription')" id="addressDescription"
                        formControlName="addressDescription" rows="5" class="form-control"
                        [readOnly]="readOnly || isPartialRequest"></textarea>
              <app-field-error-message
                [control]="fm.getFormField('addressTab.addressDescription')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>

      <div class="col-sm-12 col-md-6 mb-4">
        <building-plate #buildingPlate [record]="currentBeneficiary" [readOnly]="readOnly || isPartialRequest"
                        [propertyMap]="{buildingNo: 'buildingName', street:'streetName', zone: 'zone', unit: 'unit'}"
                        [propertyRequiredMap]="{unit: false}"></building-plate>
      </div>
    </div>
  </ng-template>
  <!-- request Info Tab -->
  <ng-template #requestInfo>
    <div formGroupName="requestInfoTab">
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="aidLookupParentId" asteriskIfRequired="aidLookupParentId"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.requested_aid_category}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="aidLookupParentId" [clearable]="true"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="aidLookupParentId"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="aidLookupParentId" appendTo="body"
                         (change)="handleMainAidChange($event)"
                         [ngClass]="fm.getStatusClass('requestInfoTab.aidLookupParentId')">
                <ng-option *ngFor="let option of mainAidLookupsList" [value]="option.id">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('requestInfoTab.aidLookupParentId')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="aidLookupId" asteriskIfRequired="aidLookupId"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.requested_aid}}</label>
            <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
              <ng-select [selectOnTab]="true" labelForId="aidLookupId" [clearable]="false"
                         [readonly]="readOnly || isPartialRequest"
                         placeholder="{{langService.map.select}}" id="aidLookupId"
                         [notFoundText]="langService.map.msg_not_found"
                         formControlName="aidLookupId" appendTo="body"
                         [ngClass]="fm.getStatusClass('requestInfoTab.aidLookupId')">
                <ng-option *ngFor="let option of subAidLookupsList" [value]="option.id">
                  {{option.getName()}}
                </ng-option>
              </ng-select>
              <app-field-error-message
                [control]="fm.getFormField('requestInfoTab.aidLookupId')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row">
            <label for="requestedAidAmount" asteriskIfRequired="requestedAidAmount"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.request_aid_amount}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <input maxlength="15" [ngClass]="fm.getStatusClass('requestInfoTab.requestedAidAmount')"
                     formControlName="requestedAidAmount" id="requestedAidAmount" class="form-control"
                     [mask]="inputMaskPatterns.SEPARATOR" [thousandSeparator]="inputMaskPatterns.THOUSAND_SEPARATOR"
                     [readOnly]="readOnly || isPartialRequest">
              <app-field-error-message
                [control]="fm.getFormField('requestInfoTab.requestedAidAmount')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6">
          <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly">
            <label for="creationDateReadOnly" asteriskIfRequired="creationDate"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.request_date}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <div class="form-control input-disabled" formControlName="creationDate"
                   id="creationDateReadOnly" [options]="datepickerOptionsMap.creationDate"
                   angular-mydatepicker [ngClass]="fm.getStatusClass('requestInfoTab.creationDate')">
              </div>
              <app-field-error-message
                [control]="fm.getFormField('requestInfoTab.creationDate')"></app-field-error-message>
            </div>
          </div>
          <div class="row d-flex flex-column flex-md-row" *ngIf="!readOnly">
            <label for="creationDate" asteriskIfRequired="creationDate"
                   class="col-sm-12 col-md-4 col-form-label">{{langService.map.request_date}}</label>
            <div class="col-md-8 col-sm-12 mb-4">
              <div class="input-group">
                <i class="input-group-text mdi mdi-calendar"></i>
                <div class="form-control" formControlName="creationDate"
                     id="creationDate" [options]="datepickerOptionsMap.creationDate"
                     (click)="dpCreationDate.toggleCalendar()" #dpCreationDate="angular-mydatepicker"
                     angular-mydatepicker [ngClass]="fm.getStatusClass('requestInfoTab.creationDate')"></div>
                <app-field-error-message
                  [control]="fm.getFormField('requestInfoTab.creationDate')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex flex-row">
        <div class="col-sm-12">
          <div class="row d-flex flex-column flex-md-row">
            <label asteriskIfRequired="requestSummary" for="requestSummary"
                   class="col-sm-12 col-md-2 col-form-label">{{langService.map.request_summary}}</label>
            <div class="col-md-10 col-sm-12 mb-4">
                  <textarea [ngClass]="fm.getStatusClass('requestInfoTab.requestSummary')" id="requestSummary"
                            formControlName="requestSummary" rows="5" class="form-control"
                            [readOnly]="readOnly || isPartialRequest"></textarea>
              <app-field-error-message
                [control]="fm.getFormField('requestInfoTab.requestSummary')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="!isPartialRequest">
        <div class="col-sm-12 mb-4">
          <div class="border rounded-1 p-2">
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="allowCompletion" formControlName="allowCompletion">
              <label class="form-check-label"
                     for="allowCompletion">{{langService.map.supplement_amount_with_other_institutes}}</label>
            </div>
            <span
              class="text-muted font-12">{{langService.map.msg_completion_offer_to_other_ou_if_not_fully_paid}}</span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12 mb-4">
          <div class="border rounded-1 p-2">
            <div class="col-md-6 col-sm-12 mb-4 position-relative">
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="allowDataSharing"
                       formControlName="allowDataSharing"
                       (change)="$event ? handleAllowDataSharingFieldChange($event) : null">
                <label class="form-check-label"
                       for="allowDataSharing">{{langService.map.disclosure}}</label>
              </div>
            </div>
            <ng-container *ngIf="!currentRequest?.id && !!allowDataSharingField?.value">
              <div class="col-md-6 col-sm-12 mb-4 position-relative">
                <file-uploader [showFileName]="true" [showFilePreview]="false"
                               labelKey="disclosure_document"
                               [allowedExtensions]="[fileExtensionsEnum.PDF]"
                               (fileUploadEvent)="setDisclosureFile($event)"
                               [isRequired]="true"></file-uploader>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <!-- Request Status -->
  <ng-template formGroupName="requestStatusTab" #requestStatus>
    <div class="row d-flex flex-row">
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row">
          <label for="requestStatus"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.request_status}}</label>
          <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
            <ng-select [selectOnTab]="true" labelForId="requestStatus" [clearable]="false"
                       [readonly]="readOnly"
                       placeholder="{{langService.map.select}}" id="requestStatus"
                       [notFoundText]="langService.map.msg_not_found"
                       formControlName="status" appendTo="body"
                       [ngClass]="fm.getStatusClass('requestStatusTab.status')">
              <ng-option *ngFor="let option of lookup.listByCategory.SubRequestStatus"
                         [disabled]="(option.lookupKey === subventionRequestStatusEnum.REMOVED || option.lookupKey === subventionRequestStatusEnum.CANCELED)"
                         [value]="option.lookupKey">
                {{option.getName()}}
              </ng-option>
            </ng-select>
            <app-field-error-message
              [control]="fm.getFormField('requestStatusTab.status')"></app-field-error-message>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly">
          <label for="statusDateModifiedReadOnly" asteriskIfRequired="statusDateModified"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.status_date}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <div class="input-group">
              <i class="input-group-text mdi mdi-calendar"></i>
              <div class="form-control input-disabled" formControlName="statusDateModified"
                   id="statusDateModifiedReadOnly" [options]="datepickerOptionsMap.statusDateModified"
                   angular-mydatepicker [ngClass]="fm.getStatusClass('requestStatusTab.statusDateModified')">
              </div>
              <app-field-error-message
                [control]="fm.getFormField('requestStatusTab.statusDateModified')"></app-field-error-message>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-column flex-md-row" *ngIf="!readOnly">
          <label for="statusDateModified" asteriskIfRequired="statusDateModified"
                 class="col-sm-12 col-md-4 col-form-label">{{langService.map.status_date}}</label>
          <div class="col-md-8 col-sm-12 mb-4">
            <div class="input-group">
              <i class="input-group-text mdi mdi-calendar"></i>
              <div class="form-control" formControlName="statusDateModified"
                   id="statusDateModified" [options]="datepickerOptionsMap.statusDateModified"
                   (click)="dpStatusDateModified.toggleCalendar()" #dpStatusDateModified="angular-mydatepicker"
                   angular-mydatepicker [ngClass]="fm.getStatusClass('requestStatusTab.statusDateModified')"></div>
              <app-field-error-message
                [control]="fm.getFormField('requestStatusTab.statusDateModified')"></app-field-error-message>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex flex-row">
      <div class="col-sm-12">
        <div class="row d-flex flex-column flex-md-row">
          <label for="requestNotes" class="col-sm-12 col-md-2 col-form-label">{{langService.map.notes}}</label>
          <div class="col-md-10 col-sm-12">
            <textarea [ngClass]="fm.getStatusClass('requestStatusTab.requestNotes')" id="requestNotes"
                      formControlName="requestNotes" rows="5" class="form-control"
                      [readOnly]="readOnly"></textarea>
            <app-field-error-message
              [control]="fm.getFormField('requestStatusTab.requestNotes')"></app-field-error-message>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <!-- Aid Tab-->
  <ng-template formArrayName="aidTab" #providedAid>
    <ng-container *ngFor="let _ of aidFormArray.controls; let i = index">
      <div [formGroupName]="i">
        <div class="row d-flex flex-row">
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label for="requestedAidCategory" asteriskIfRequired="aidLookupParentId"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.requested_aid_category}}</label>
              <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
                <ng-select [selectOnTab]="true" labelForId="requestedAidCategory" [clearable]="true"
                           [readonly]="readOnly || isPartialRequest"
                           placeholder="{{langService.map.select}}" id="requestedAidCategory"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="aidLookupParentId" appendTo="body"
                           (change)="handleAidsMainAidChange($event)"
                           [ngClass]="fm.getStatusClass('aidTab.0.aidLookupParentId')">
                  <ng-option *ngFor="let option of mainAidLookupsList" [value]="option.id">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.aidLookupParentId')"></app-field-error-message>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label for="requestedAid" asteriskIfRequired="aidLookupId"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.requested_aid}}</label>
              <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
                <ng-select [selectOnTab]="true" labelForId="requestedAid" [clearable]="true"
                           [readonly]="readOnly || isPartialRequest"
                           placeholder="{{langService.map.select}}" id="requestedAid"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="aidLookupId" appendTo="body"
                           [ngClass]="fm.getStatusClass('aidTab.0.aidLookupId')">
                  <ng-option *ngFor="let option of aidsSubAidLookupsList" [value]="option.id">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.aidLookupId')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-row">
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly">
              <label asteriskIfRequired="approvalDate" for="approvalDateReadOnly"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.approval_date}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <div class="form-control input-disabled" formControlName="approvalDate"
                     id="approvalDateReadOnly" [options]="datepickerOptionsMap.aidApprovalDate"
                     angular-mydatepicker [ngClass]="fm.getStatusClass('aidTab.0.approvalDate')">
                  <app-field-error-message
                    [control]="fm.getFormField('aidTab.0.approvalDate')"></app-field-error-message>
                </div>
              </div>
            </div>
            <div class="row d-flex flex-column flex-md-row" *ngIf="!readOnly">
              <label asteriskIfRequired="approvalDate" for="approvalDate"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.approval_date}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <div class="input-group">
                  <i class="input-group-text mdi mdi-calendar"></i>
                  <div class="form-control" formControlName="approvalDate"
                       id="approvalDate" [options]="datepickerOptionsMap.aidApprovalDate"
                       (click)="dpAidApprovalDate.toggleCalendar()" #dpAidApprovalDate="angular-mydatepicker"
                       angular-mydatepicker [ngClass]="fm.getStatusClass('aidTab.0.approvalDate')"></div>
                  <app-field-error-message
                    [control]="fm.getFormField('aidTab.0.approvalDate')"></app-field-error-message>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row" *ngIf="readOnly">
              <label asteriskIfRequired="aidStartPayDate" for="aidStartPayDateReadOnly"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.payment_date}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <div class="form-control input-disabled" formControlName="aidStartPayDate"
                     id="aidStartPayDateReadOnly" [options]="datepickerOptionsMap.aidPaymentDate"
                     angular-mydatepicker [ngClass]="fm.getStatusClass('aidTab.0.aidStartPayDate')">
                  <app-field-error-message
                    [control]="fm.getFormField('aidTab.0.aidStartPayDate')"></app-field-error-message>
                </div>
              </div>
            </div>
            <div class="row d-flex flex-column flex-md-row" *ngIf="!readOnly">
              <label asteriskIfRequired="aidStartPayDate" for="aidStartPayDate"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.payment_date}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <div class="input-group">
                  <i class="input-group-text mdi mdi-calendar"></i>
                  <div class="form-control" formControlName="aidStartPayDate"
                       id="aidStartPayDate" [options]="datepickerOptionsMap.aidPaymentDate"
                       (click)="dpAidStartPayDate.toggleCalendar()" #dpAidStartPayDate="angular-mydatepicker"
                       angular-mydatepicker [ngClass]="fm.getStatusClass('aidTab.0.aidStartPayDate')"></div>
                  <app-field-error-message
                    [control]="fm.getFormField('aidTab.0.aidStartPayDate')"></app-field-error-message>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-row">
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label asteriskIfRequired="periodicType" for="periodicType"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.payment_periodicity}}</label>
              <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
                <ng-select [selectOnTab]="true" labelForId="periodicType" [clearable]="false"
                           [readonly]="readOnly"
                           placeholder="{{langService.map.select}}" id="periodicType"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="periodicType" appendTo="body"
                           (change)="aidsPeriodicTypeChange($event, true)"
                           [ngClass]="fm.getStatusClass('aidTab.0.periodicType')">
                  <ng-option *ngFor="let option of lookup.listByCategory.SubAidPeriodicType"
                             [value]="option.lookupKey">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.periodicType')"></app-field-error-message>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label asteriskIfRequired="donorId" for="donorId"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.donor}}</label>
              <div class="col-md-8 col-sm-12 mb-4 ng-select-wrapper">
                <ng-select [selectOnTab]="true" labelForId="donorId" [clearable]="false"
                           [readonly]="readOnly"
                           placeholder="{{langService.map.select}}" id="donorId"
                           [notFoundText]="langService.map.msg_not_found"
                           formControlName="donorId" appendTo="body"
                           [ngClass]="fm.getStatusClass('aidTab.0.donorId')">
                  <ng-option *ngFor="let option of donorList" [disabled]="!option.isActive()"
                             [value]="option.id">
                    {{option.getName()}}
                  </ng-option>
                </ng-select>
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.periodicType')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-row">
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label for="aidSuggestedAmount" asteriskIfRequired="aidSuggestedAmount"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.estimated_amount}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <input id="aidSuggestedAmount" maxlength="15"
                       [ngClass]="fm.getStatusClass('aidTab.0.aidSuggestedAmount')"
                       formControlName="aidSuggestedAmount" class="form-control" mask="separator" thousandSeparator=","
                       [readOnly]="readOnly || isPartialRequest">
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.aidSuggestedAmount')"></app-field-error-message>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label for="aidAmount" asteriskIfRequired="aidAmount"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.given_amount}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <input id="aidAmount" maxlength="15" [ngClass]="fm.getStatusClass('aidTab.0.aidAmount')"
                       formControlName="aidAmount" class="form-control" [mask]="inputMaskPatterns.SEPARATOR"
                       [thousandSeparator]="inputMaskPatterns.THOUSAND_SEPARATOR"
                       [readOnly]="readOnly">
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.aidAmount')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-row">
          <div class="col-sm-12 col-md-6">
            <div class="row d-flex flex-column flex-md-row">
              <label asteriskIfRequired="installmentsCount" for="installmentsCount"
                     class="col-sm-12 col-md-4 col-form-label">{{langService.map.number_of_installments}}</label>
              <div class="col-md-8 col-sm-12 mb-4">
                <input maxlength="20" [ngClass]="fm.getStatusClass('aidTab.0.installmentsCount')"
                       id="installmentsCount" [mask]="inputMaskPatterns.NUMBER_ONLY"
                       formControlName="installmentsCount" class="form-control"
                       [readOnly]="readOnly">
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.installmentsCount')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex flex-row">
          <div class="col-sm-12">
            <div class="row d-flex flex-column flex-md-row">
              <label asteriskIfRequired="aidDescription" for="aidDescription"
                     class="col-sm-12 col-md-2 col-form-label">{{langService.map.lbl_description}}</label>
              <div class="col-md-10 col-sm-12">
                    <textarea [ngClass]="fm.getStatusClass('aidTab.0.aidDescription')" id="aidDescription"
                              formControlName="aidDescription" rows="3" class="form-control"
                              [readOnly]="readOnly"></textarea>
                <app-field-error-message
                  [control]="fm.getFormField('aidTab.0.aidDescription')"></app-field-error-message>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex flex-row align-items-center justify-content-center">
          <button (click)="saveAid()"
                  class="btn btn-primary m-2">{{editAidItem ? langService.map.btn_save : langService.map.btn_add}}</button>
          <button (click)="cancelAid()"
                  class="btn btn-secondary m-2">{{langService.map.btn_cancel}}</button>
        </div>
      </div>
    </ng-container>

    <aid-list tableTitle="provided_aid" [list]="subventionAidList" [displayColumns]="aidColumns"
              [searchFieldsName]="'searchFieldsUserRequest'" [actions]="aidsActions"
              [addAid$]="addAid$" [reloadAid$]="reloadAid$"
              [allowAdd]="addAidAllowed() && (aidFormArray.controls.length === 0)">
    </aid-list>
  </ng-template>
  <!-- Attachments Tab -->
  <ng-template #attachmentsTabTemplate>
    <app-attachment-list #attachmentListComponent
                         [request]="currentRequest"
                         [attachmentList]="attachmentList"
                         [readOnly]="readOnly"
                         (updateList)="updateAttachmentList($event)"
                         (onFormToggle)="isAttachmentFormVisible = $event"
    ></app-attachment-list>
  </ng-template>
  <hr/>
  <div *ngIf="!aidFormArray.controls.length && !isAttachmentFormVisible" class="d-flex flex-row justify-content-center">
    <button *ngIf="saveVisible" [disabled]="!saveButtonEnabled()" type="button" (click)="saveModel()"
            class="btn btn-primary m-2">{{editMode ? langService.map.btn_save : langService.map.btn_add}}</button>
    <button *ngIf="cancelVisible" type="button" (click)="cancelRequest()"
            class="btn btn-secondary m-2">{{langService.map.btn_cancel}}</button>
    <button tabindex="-1" *ngIf="validateFieldsVisible" (click)="displayFormValidity(fm.mainContentId)"
            tooltip="{{langService.map.validate_fields}}" class="btn btn-link">
      <i class="mdi mdi-information-outline text-info"></i>
    </button>
  </div>
</form>
